openapi: 3.0.3
info:
  title: Zoea V2 API
  version: "2.0.0"
  description: |
    Zoea V2 Merchant Management module OpenAPI specification.
    All success and error responses adhere to standardized envelope structures.
servers:
  - url: https://api.zoea.local
    description: Zoea V2 primary API server
tags:
  - name: Authentication
    description: Account registration, login, and credential management.
  - name: Users
    description: User profile and account management.
  - name: Saved Locations
    description: Manage user saved locations.
  - name: User Favorites
    description: Manage favorite listings for a user.
  - name: Search History
    description: Manage user search history records.
  - name: Agent Accounts
    description: Agent registration and profile management.
  - name: Agent Onboarding
    description: Tools for agents onboarding users and merchants.
  - name: Agent Commissions
    description: Commission tracking and payouts for agents.
  - name: Agent Leaderboard
    description: Agent ranking and leaderboard insights.
  - name: Agent Analytics
    description: Agent performance analytics and reporting.
  - name: Listings
    description: Manage core listings catalog.
  - name: Listing Locations
    description: Manage locations attached to listings.
  - name: Hotel Room Types
    description: Manage hotel room types and related configurations.
  - name: Rate Plans
    description: Manage hotel rate plans and restrictions.
  - name: Listing Availability
    description: Manage availability calendars for listings and resources.
  - name: Events
    description: Manage events and associated ticket tiers.
  - name: Restaurant Tables
    description: Manage restaurant table configurations and availability checks.
  - name: Products
    description: Manage product inventory for listings.
  - name: Services
    description: Manage service offerings and availability.
  - name: Tours
    description: Manage tour packages, schedules, and add-ons.
  - name: Booking Search
    description: Search and check booking availability.
  - name: Bookings
    description: Manage bookings and reservations.
  - name: Booking Participants
    description: Manage booking participants and guests.
  - name: Booking Add-ons
    description: Manage booking add-ons and extras.
  - name: Booking Check-in/Check-out
    description: Handle check-in and check-out operations.
  - name: Orders
    description: Manage product orders and deliveries.
  - name: Merchant Onboarding
    description: Onboarding workflows for new merchants.
  - name: Merchant Profile
    description: Merchant profile management endpoints.
  - name: Merchant Locations
    description: CRUD operations for merchant locations.
  - name: Merchant Subscriptions
    description: Manage merchant subscription plans.
  - name: Merchant Promotions
    description: Manage merchant promotional campaigns.
paths:
  /api/v1/auth/register:
    post:
      tags:
        - Authentication
      summary: Register a new user account
      operationId: registerUserAccount
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UserRegistrationRequest'
      responses:
        '201':
          description: User registered successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/AuthResponse'
              examples:
                userRegistered:
                  value:
                    status: success
                    message: User registered successfully
                    data:
                      user:
                        user_id: 2001
                        first_name: Alice
                        last_name: Umutesi
                        email: alice@example.com
                        phone_number: '+250788000111'
                        avatar_url: https://cdn.zoea.rw/avatars/2001.png
                        default_city: Kigali
                        is_verified: false
                        created_at: 2025-11-07T08:00:00Z
                        updated_at: 2025-11-07T08:00:00Z
                      tokens:
                        access_token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
                        refresh_token: 3b2f6d4b-9c5a-4ac5-9f5b-87f6ecddc6bb
                        expires_in: 3600
        '400':
          $ref: '#/components/responses/BadRequestError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/auth/login:
    post:
      tags:
        - Authentication
      summary: Authenticate an existing user
      operationId: loginUser
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UserLoginRequest'
      responses:
        '200':
          description: User authenticated successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/AuthResponse'
              examples:
                userLogin:
                  value:
                    status: success
                    message: Login successful
                    data:
                      user:
                        user_id: 2001
                        first_name: Alice
                        last_name: Umutesi
                        email: alice@example.com
                        phone_number: '+250788000111'
                        avatar_url: https://cdn.zoea.rw/avatars/2001.png
                        default_city: Kigali
                        is_verified: true
                        created_at: 2025-01-10T09:00:00Z
                        updated_at: 2025-11-07T07:32:00Z
                      tokens:
                        access_token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
                        refresh_token: 13a2cbf5-25ba-43f5-9e0b-5aef2c6782e4
                        expires_in: 3600
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/auth/logout:
    post:
      tags:
        - Authentication
      summary: Logout the current session
      operationId: logoutUser
      security:
        - BearerAuth: []
      responses:
        '200':
          description: User logged out successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Acknowledgement'
              examples:
                userLogout:
                  value:
                    status: success
                    message: Logout successful
                    data:
                      acknowledged: true
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/auth/refresh-token:
    post:
      tags:
        - Authentication
      summary: Refresh access and refresh tokens
      operationId: refreshAuthToken
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RefreshTokenRequest'
      responses:
        '200':
          description: Tokens refreshed successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/AuthTokens'
              examples:
                tokenRefresh:
                  value:
                    status: success
                    message: Tokens refreshed
                    data:
                      access_token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
                      refresh_token: 8d6e2df0-8895-4b54-b1f1-bd8d2b7aa122
                      expires_in: 3600
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/auth/forgot-password:
    post:
      tags:
        - Authentication
      summary: Initiate password reset flow
      operationId: initiatePasswordReset
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ForgotPasswordRequest'
      responses:
        '200':
          description: Password reset email dispatched
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/PasswordResetDispatch'
              examples:
                passwordResetInit:
                  value:
                    status: success
                    message: Password reset instructions sent
                    data:
                      email: alice@example.com
                      reset_token_sent: true
                      expires_in: 900
        '400':
          $ref: '#/components/responses/BadRequestError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/auth/reset-password:
    post:
      tags:
        - Authentication
      summary: Complete password reset
      operationId: resetPassword
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ResetPasswordRequest'
      responses:
        '200':
          description: Password reset successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/PasswordResetResult'
              examples:
                passwordResetComplete:
                  value:
                    status: success
                    message: Password reset completed
                    data:
                      password_reset: true
        '400':
          $ref: '#/components/responses/BadRequestError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/auth/verify-email:
    post:
      tags:
        - Authentication
      summary: Verify a user email address
      operationId: verifyEmail
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/VerifyEmailRequest'
      responses:
        '200':
          description: Email verified successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/EmailVerificationResult'
              examples:
                emailVerified:
                  value:
                    status: success
                    message: Email verified successfully
                    data:
                      verified: true
        '400':
          $ref: '#/components/responses/BadRequestError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/users/me:
    get:
      tags:
        - Users
      summary: Retrieve the authenticated user profile
      operationId: getAuthenticatedUser
      security:
        - BearerAuth: []
      responses:
        '200':
          description: Authenticated user profile retrieved
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/User'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'
    put:
      tags:
        - Users
      summary: Replace the authenticated user profile
      operationId: updateAuthenticatedUser
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UserProfileUpdateRequest'
      responses:
        '200':
          description: Authenticated user profile updated
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/User'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'
    patch:
      tags:
        - Users
      summary: Partially update the authenticated user profile
      operationId: patchAuthenticatedUser
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UserProfilePatchRequest'
      responses:
        '200':
          description: Authenticated user profile updated
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/User'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'
    delete:
      tags:
        - Users
      summary: Deactivate the authenticated user account
      operationId: deleteAuthenticatedUser
      security:
        - BearerAuth: []
      responses:
        '200':
          description: Authenticated user account deactivated
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/AccountDeletionResult'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/users/{user_id}:
    get:
      tags:
        - Users
      summary: Retrieve a user profile by identifier
      operationId: getUserById
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/UserIdParam'
      responses:
        '200':
          description: User profile retrieved
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/User'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/users/{user_id}/avatar:
    put:
      tags:
        - Users
      summary: Update a user avatar
      operationId: updateUserAvatar
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/UserIdParam'
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/UserAvatarUploadRequest'
      responses:
        '200':
          description: User avatar updated
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/User'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/users/me/saved-locations:
    get:
      tags:
        - Saved Locations
      summary: List saved locations for the authenticated user
      operationId: listSavedLocations
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/LimitParam'
        - $ref: '#/components/parameters/SortParam'
        - $ref: '#/components/parameters/SearchParam'
      responses:
        '200':
          description: Saved locations retrieved
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/PaginatedSuccessResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/SavedLocation'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'
    post:
      tags:
        - Saved Locations
      summary: Create a saved location for the authenticated user
      operationId: createSavedLocation
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SavedLocationRequest'
      responses:
        '201':
          description: Saved location created
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/SavedLocation'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/users/me/saved-locations/{saved_location_id}:
    put:
      tags:
        - Saved Locations
      summary: Update a saved location
      operationId: updateSavedLocation
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/SavedLocationIdParam'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SavedLocationRequest'
      responses:
        '200':
          description: Saved location updated
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/SavedLocation'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
    delete:
      tags:
        - Saved Locations
      summary: Delete a saved location
      operationId: deleteSavedLocation
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/SavedLocationIdParam'
      responses:
        '200':
          description: Saved location deleted
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Acknowledgement'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/users/me/favorites:
    get:
      tags:
        - User Favorites
      summary: List favorite listings for the authenticated user
      operationId: listUserFavorites
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/LimitParam'
        - $ref: '#/components/parameters/SortParam'
        - $ref: '#/components/parameters/SearchParam'
      responses:
        '200':
          description: Favorite listings retrieved
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/PaginatedSuccessResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/UserFavorite'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'
    post:
      tags:
        - User Favorites
      summary: Add a listing to user favorites
      operationId: createUserFavorite
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UserFavoriteRequest'
      responses:
        '201':
          description: Favorite listing created
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/UserFavorite'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/users/me/favorites/{listing_id}:
    delete:
      tags:
        - User Favorites
      summary: Remove a listing from user favorites
      operationId: deleteUserFavorite
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/ListingIdParam'
      responses:
        '200':
          description: Favorite listing removed
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Acknowledgement'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/users/me/search-history:
    get:
      tags:
        - Search History
      summary: List search history for the authenticated user
      operationId: listUserSearchHistory
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/LimitParam'
        - $ref: '#/components/parameters/SortParam'
        - $ref: '#/components/parameters/SearchParam'
      responses:
        '200':
          description: Search history entries retrieved
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/PaginatedSuccessResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/UserSearchHistoryEntry'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'
    delete:
      tags:
        - Search History
      summary: Clear all search history for the authenticated user
      operationId: deleteUserSearchHistory
      security:
        - BearerAuth: []
      responses:
        '200':
          description: Search history cleared
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/SearchHistoryClearResult'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/users/me/search-history/{search_id}:
    delete:
      tags:
        - Search History
      summary: Delete a single search history entry
      operationId: deleteUserSearchHistoryEntry
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/SearchIdParam'
      responses:
        '200':
          description: Search history entry deleted
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/SearchHistoryDeleteResult'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/agents/apply:
    post:
      tags:
        - Agent Accounts
      summary: Apply to become an agent
      operationId: applyForAgent
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AgentApplicationRequest'
      responses:
        '201':
          description: Agent application submitted successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Agent'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/agents/me:
    get:
      tags:
        - Agent Accounts
      summary: Retrieve the authenticated agent profile
      operationId: getAuthenticatedAgent
      security:
        - BearerAuth: []
      responses:
        '200':
          description: Authenticated agent profile retrieved
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Agent'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'
    put:
      tags:
        - Agent Accounts
      summary: Update the authenticated agent profile
      operationId: updateAuthenticatedAgent
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AgentProfileUpdateRequest'
      responses:
        '200':
          description: Authenticated agent profile updated
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Agent'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/agents/{agent_id}:
    get:
      tags:
        - Agent Accounts
      summary: Retrieve an agent profile by identifier
      operationId: getAgentById
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/AgentIdParam'
      responses:
        '200':
          description: Agent profile retrieved
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Agent'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/agents/onboard-user:
    post:
      tags:
        - Agent Onboarding
      summary: Onboard a new user via agent
      operationId: agentOnboardUser
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AgentOnboardUserRequest'
      responses:
        '201':
          description: User onboarded successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/AgentOnboardingResult'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/agents/onboard-merchant:
    post:
      tags:
        - Agent Onboarding
      summary: Onboard a new merchant via agent
      operationId: agentOnboardMerchant
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AgentOnboardMerchantRequest'
      responses:
        '201':
          description: Merchant onboarded successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/AgentOnboardingResult'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/agents/onboarding-stats:
    get:
      tags:
        - Agent Onboarding
      summary: Retrieve onboarding statistics for the authenticated agent
      operationId: getAgentOnboardingStats
      security:
        - BearerAuth: []
      responses:
        '200':
          description: Agent onboarding statistics retrieved
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/AgentOnboardingStats'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/agents/me/commissions:
    get:
      tags:
        - Agent Commissions
      summary: List commissions earned by the authenticated agent
      operationId: listAgentCommissions
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/LimitParam'
        - $ref: '#/components/parameters/SortParam'
        - in: query
          name: status
          schema:
            $ref: '#/components/schemas/CommissionStatus'
          description: Filter by commission payment status
        - in: query
          name: commission_type
          schema:
            $ref: '#/components/schemas/CommissionType'
          description: Filter by commission type
      responses:
        '200':
          description: Agent commissions retrieved
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/PaginatedSuccessResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/Commission'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/agents/me/commissions/summary:
    get:
      tags:
        - Agent Commissions
      summary: Retrieve commissions summary for the authenticated agent
      operationId: getAgentCommissionSummary
      security:
        - BearerAuth: []
      responses:
        '200':
          description: Agent commission summary retrieved
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/CommissionSummary'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/agents/me/commissions/{commission_id}/payout:
    post:
      tags:
        - Agent Commissions
      summary: Request payout for a commission
      operationId: payoutAgentCommission
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/CommissionIdParam'
      responses:
        '200':
          description: Commission payout initiated
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/CommissionPayoutResult'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/agents/leaderboard:
    get:
      tags:
        - Agent Leaderboard
      summary: Retrieve leaderboard standings for agents
      operationId: getAgentLeaderboard
      parameters:
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/LimitParam'
        - $ref: '#/components/parameters/SortParam'
        - in: query
          name: period
          schema:
            $ref: '#/components/schemas/LeaderboardPeriod'
          description: Filter leaderboard by period
        - in: query
          name: tier
          schema:
            $ref: '#/components/schemas/AgentTier'
          description: Filter leaderboard by agent tier
      responses:
        '200':
          description: Agent leaderboard retrieved
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/PaginatedSuccessResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/AgentLeaderboardEntry'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/agents/leaderboard/{period}:
    get:
      tags:
        - Agent Leaderboard
      summary: Retrieve leaderboard standings for a specific period
      operationId: getAgentLeaderboardByPeriod
      parameters:
        - $ref: '#/components/parameters/LeaderboardPeriodParam'
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/LimitParam'
      responses:
        '200':
          description: Agent leaderboard retrieved for period
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/PaginatedSuccessResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/AgentLeaderboardEntry'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/agents/me/leaderboard-position:
    get:
      tags:
        - Agent Leaderboard
      summary: Retrieve the authenticated agent leaderboard position
      operationId: getAgentLeaderboardPosition
      security:
        - BearerAuth: []
      responses:
        '200':
          description: Agent leaderboard position retrieved
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/AgentLeaderboardPosition'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/agents/me/analytics:
    get:
      tags:
        - Agent Analytics
      summary: Retrieve analytics for the authenticated agent
      operationId: getAgentAnalytics
      security:
        - BearerAuth: []
      parameters:
        - in: query
          name: from
          schema:
            type: string
            format: date
          description: Start date filter
        - in: query
          name: to
          schema:
            type: string
            format: date
          description: End date filter
      responses:
        '200':
          description: Agent analytics retrieved
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/AgentAnalytics'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/agents/me/performance:
    get:
      tags:
        - Agent Analytics
      summary: Retrieve performance metrics for the authenticated agent
      operationId: getAgentPerformance
      security:
        - BearerAuth: []
      parameters:
        - in: query
          name: period
          schema:
            $ref: '#/components/schemas/LeaderboardPeriod'
          description: Period over which to aggregate performance
      responses:
        '200':
          description: Agent performance metrics retrieved
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/AgentPerformance'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/listings:
    get:
      tags:
        - Listings
      summary: List listings with filters and pagination
      operationId: listListings
      parameters:
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/LimitParam'
        - $ref: '#/components/parameters/SortParam'
        - $ref: '#/components/parameters/SearchParam'
        - in: query
          name: type
          schema:
            type: string
            enum: [hotel, event, restaurant, tour, product, service]
          description: Filter listings by type
        - in: query
          name: is_active
          schema:
            type: boolean
          description: Filter listings by active status
      responses:
        '200':
          description: Listings retrieved successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/PaginatedSuccessResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/Listing'
              examples:
                listingsPage:
                  value:
                    status: success
                    message: Listings retrieved
                    data:
                      - listing_id: 301
                        merchant_id: 101
                        title: Skyline Hotel Kigali
                        description: Luxury hotel with rooftop lounge.
                        type: hotel
                        gallery_images:
                          - https://cdn.zoea.rw/listings/301/cover.jpg
                        base_price: 120.0
                        currency: RWF
                        is_active: true
                        operating_hours:
                          checkin: "14:00"
                          checkout: "11:00"
                        min_booking_notice_hours: 4
                        max_advance_booking_days: 365
                        service_config:
                          property_rating: 5
                        created_at: 2025-10-01T08:00:00Z
                        updated_at: 2025-11-07T09:00:00Z
                    pagination:
                      page: 1
                      limit: 20
                      total: 145
                      totalPages: 8
        '400':
          $ref: '#/components/responses/BadRequestError'
        '500':
          $ref: '#/components/responses/InternalServerError'
    post:
      tags:
        - Listings
      summary: Create a new listing
      operationId: createListing
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ListingCreateRequest'
      responses:
        '201':
          description: Listing created successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Listing'
              examples:
                listingCreated:
                  value:
                    status: success
                    message: Listing created successfully
                    data:
                      listing_id: 322
                      merchant_id: 101
                      title: Green Hills Eco Lodge
                      description: Sustainable lodge in Musanze.
                      type: hotel
                      gallery_images:
                        - https://cdn.zoea.rw/listings/322/front.jpg
                      base_price: 95.0
                      currency: RWF
                      is_active: true
                      created_at: 2025-11-07T11:25:00Z
                      updated_at: 2025-11-07T11:25:00Z
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/listings/{listing_id}:
    get:
      tags:
        - Listings
      summary: Retrieve a listing by identifier
      operationId: getListingById
      parameters:
        - $ref: '#/components/parameters/ListingIdParam'
      responses:
        '200':
          description: Listing retrieved successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Listing'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
    put:
      tags:
        - Listings
      summary: Update a listing
      operationId: updateListing
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/ListingIdParam'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ListingUpdateRequest'
      responses:
        '200':
          description: Listing updated successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Listing'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
    delete:
      tags:
        - Listings
      summary: Delete a listing
      operationId: deleteListing
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/ListingIdParam'
      responses:
        '200':
          description: Listing deleted successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Acknowledgement'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/listings/{listing_id}/status:
    patch:
      tags:
        - Listings
      summary: Update listing active status
      operationId: patchListingStatus
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/ListingIdParam'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ListingStatusUpdateRequest'
      responses:
        '200':
          description: Listing status updated successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Listing'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/listings/{listing_id}/locations:
    get:
      tags:
        - Listing Locations
      summary: List locations attached to a listing
      operationId: listListingLocations
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/ListingIdParam'
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/LimitParam'
        - $ref: '#/components/parameters/SortParam'
      responses:
        '200':
          description: Listing locations retrieved successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/PaginatedSuccessResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/ListingLocation'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
    post:
      tags:
        - Listing Locations
      summary: Create a location for a listing
      operationId: createListingLocation
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/ListingIdParam'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ListingLocationRequest'
      responses:
        '201':
          description: Listing location created successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/ListingLocation'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/listings/{listing_id}/locations/{location_id}:
    put:
      tags:
        - Listing Locations
      summary: Update a listing location
      operationId: updateListingLocation
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/ListingIdParam'
        - $ref: '#/components/parameters/LocationIdParam'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ListingLocationRequest'
      responses:
        '200':
          description: Listing location updated successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/ListingLocation'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
    delete:
      tags:
        - Listing Locations
      summary: Remove a listing location
      operationId: deleteListingLocation
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/ListingIdParam'
        - $ref: '#/components/parameters/LocationIdParam'
      responses:
        '200':
          description: Listing location removed successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Acknowledgement'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/listings/{listing_id}/room-types:
    get:
      tags:
        - Hotel Room Types
      summary: List room types for a hotel listing
      operationId: listRoomTypes
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/ListingIdParam'
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/LimitParam'
      responses:
        '200':
          description: Room types retrieved successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/PaginatedSuccessResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/HotelRoomType'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
    post:
      tags:
        - Hotel Room Types
      summary: Create a room type for a listing
      operationId: createRoomType
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/ListingIdParam'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/HotelRoomTypeRequest'
      responses:
        '201':
          description: Room type created successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/HotelRoomType'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/room-types/{room_type_id}:
    get:
      tags:
        - Hotel Room Types
      summary: Retrieve a room type by identifier
      operationId: getRoomTypeById
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/RoomTypeIdParam'
      responses:
        '200':
          description: Room type retrieved successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/HotelRoomType'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
    put:
      tags:
        - Hotel Room Types
      summary: Update a room type
      operationId: updateRoomType
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/RoomTypeIdParam'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/HotelRoomTypeRequest'
      responses:
        '200':
          description: Room type updated successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/HotelRoomType'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
    delete:
      tags:
        - Hotel Room Types
      summary: Delete a room type
      operationId: deleteRoomType
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/RoomTypeIdParam'
      responses:
        '200':
          description: Room type deleted successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Acknowledgement'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /api/v1/room-types/{room_type_id}/rate-plans:
    get:
      tags:
        - Rate Plans
      summary: List rate plans for a room type
      operationId: listRatePlans
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/RoomTypeIdParam'
      responses:
        '200':
          description: Rate plans retrieved successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/RatePlan'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
    post:
      tags:
        - Rate Plans
      summary: Create a rate plan for a room type
      operationId: createRatePlan
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/RoomTypeIdParam'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RatePlanRequest'
      responses:
        '201':
          description: Rate plan created successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/RatePlan'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/rate-plans/{rate_plan_id}:
    get:
      tags:
        - Rate Plans
      summary: Retrieve a rate plan by identifier
      operationId: getRatePlanById
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/RatePlanIdParam'
      responses:
        '200':
          description: Rate plan retrieved successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/RatePlan'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
    put:
      tags:
        - Rate Plans
      summary: Update a rate plan
      operationId: updateRatePlan
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/RatePlanIdParam'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RatePlanRequest'
      responses:
        '200':
          description: Rate plan updated successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/RatePlan'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
    delete:
      tags:
        - Rate Plans
      summary: Delete a rate plan
      operationId: deleteRatePlan
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/RatePlanIdParam'
      responses:
        '200':
          description: Rate plan deleted successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Acknowledgement'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
 
  /api/v1/listings/{listing_id}/availability:
    get:
      tags:
        - Listing Availability
      summary: Retrieve availability calendar for a listing
      operationId: getListingAvailability
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/ListingIdParam'
        - in: query
          name: from
          schema:
            type: string
            format: date
          description: Start date filter
        - in: query
          name: to
          schema:
            type: string
            format: date
          description: End date filter
      responses:
        '200':
          description: Listing availability retrieved successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/ListingAvailabilityEntry'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /api/v1/listings/{listing_id}/events:
    get:
      tags:
        - Events
      summary: List events for a listing
      operationId: listEvents
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/ListingIdParam'
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/LimitParam'
      responses:
        '200':
          description: Events retrieved successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/PaginatedSuccessResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/Event'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
    post:
      tags:
        - Events
      summary: Create an event for a listing
      operationId: createEvent
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/ListingIdParam'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/EventRequest'
      responses:
        '201':
          description: Event created successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Event'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/events/{event_id}:
    get:
      tags:
        - Events
      summary: Retrieve an event by identifier
      operationId: getEventById
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/EventIdParam'
      responses:
        '200':
          description: Event retrieved successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Event'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
    put:
      tags:
        - Events
      summary: Update an event
      operationId: updateEvent
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/EventIdParam'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/EventRequest'
      responses:
        '200':
          description: Event updated successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Event'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
    delete:
      tags:
        - Events
      summary: Delete an event
      operationId: deleteEvent
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/EventIdParam'
      responses:
        '200':
          description: Event deleted successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Acknowledgement'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/events/{event_id}/ticket-tiers:
    get:
      tags:
        - Events
      summary: List ticket tiers for an event
      operationId: listTicketTiers
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/EventIdParam'
      responses:
        '200':
          description: Ticket tiers retrieved successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/TicketTier'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
    post:
      tags:
        - Events
      summary: Create a ticket tier for an event
      operationId: createTicketTier
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/EventIdParam'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TicketTierRequest'
      responses:
        '201':
          description: Ticket tier created successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/TicketTier'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/ticket-tiers/{tier_id}:
    put:
      tags:
        - Events
      summary: Update a ticket tier
      operationId: updateTicketTier
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/TicketTierIdParam'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TicketTierRequest'
      responses:
        '200':
          description: Ticket tier updated successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/TicketTier'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/listings/{listing_id}/tables:
    get:
      tags:
        - Restaurant Tables
      summary: List table configurations for a listing
      operationId: listRestaurantTables
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/ListingIdParam'
      responses:
        '200':
          description: Restaurant tables retrieved successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/RestaurantTable'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
    post:
      tags:
        - Restaurant Tables
      summary: Create a table configuration
      operationId: createRestaurantTable
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/ListingIdParam'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RestaurantTableRequest'
      responses:
        '201':
          description: Restaurant table created successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/RestaurantTable'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/tables/{table_id}:
    get:
      tags:
        - Restaurant Tables
      summary: Retrieve a restaurant table configuration
      operationId: getRestaurantTable
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/TableIdParam'
      responses:
        '200':
          description: Restaurant table retrieved successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/RestaurantTable'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
    put:
      tags:
        - Restaurant Tables
      summary: Update a restaurant table configuration
      operationId: updateRestaurantTable
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/TableIdParam'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RestaurantTableRequest'
      responses:
        '200':
          description: Restaurant table updated successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/RestaurantTable'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
    delete:
      tags:
        - Restaurant Tables
      summary: Delete a restaurant table configuration
      operationId: deleteRestaurantTable
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/TableIdParam'
      responses:
        '200':
          description: Restaurant table deleted successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Acknowledgement'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/listings/{listing_id}/table-availability/check:
    post:
      tags:
        - Restaurant Tables
      summary: Check table availability for a specific time window
      operationId: checkTableAvailability
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/ListingIdParam'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TableAvailabilityCheckRequest'
      responses:
        '200':
          description: Table availability evaluated successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/TableAvailabilityCheckResult'
              examples:
                tableAvailability:
                  value:
                    status: success
                    message: Availability calculated
                    data:
                      available: true
                      suggested_tables:
                        - table_id: 880
                          listing_id: 305
                          table_type: indoor
                          capacity: 4
                          table_count: 10
                          min_booking_duration_minutes: 90
                          created_at: 2025-05-01T08:00:00Z
                          updated_at: 2025-11-06T14:00:00Z
                      message: Reserved successfully
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/listings/{listing_id}/products:
    get:
      tags:
        - Products
      summary: List products for a listing
      operationId: listProducts
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/ListingIdParam'
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/LimitParam'
        - $ref: '#/components/parameters/SortParam'
      responses:
        '200':
          description: Products retrieved successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/PaginatedSuccessResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/Product'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
    post:
      tags:
        - Products
      summary: Create a product for a listing
      operationId: createProduct
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/ListingIdParam'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ProductRequest'
      responses:
        '201':
          description: Product created successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Product'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/products/{product_id}:
    get:
      tags:
        - Products
      summary: Retrieve a product by identifier
      operationId: getProduct
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/ProductIdParam'
      responses:
        '200':
          description: Product retrieved successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Product'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
    put:
      tags:
        - Products
      summary: Update a product
      operationId: updateProduct
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/ProductIdParam'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ProductRequest'
      responses:
        '200':
          description: Product updated successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Product'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
    delete:
      tags:
        - Products
      summary: Delete a product
      operationId: deleteProduct
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/ProductIdParam'
      responses:
        '200':
          description: Product deleted successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Acknowledgement'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/products/{product_id}/inventory:
    patch:
      tags:
        - Products
      summary: Update product inventory details
      operationId: updateProductInventory
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/ProductIdParam'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ProductInventoryPatchRequest'
      responses:
        '200':
          description: Product inventory updated successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Product'
              examples:
                productInventory:
                  value:
                    status: success
                    message: Inventory updated
                    data:
                      product_id: 5402
                      listing_id: 305
                      product_name: Lake Kivu Coffee Beans 1kg
                      description: Single-origin beans from Gisenyi.
                      stock_quantity: 32
                      variants:
                        - size: 1kg
                          roast: medium
                      track_inventory: true
                      price: 18.5
                      currency: USD
                      status: active
                      created_at: 2025-03-12T10:00:00Z
                      updated_at: 2025-11-07T13:45:00Z
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/listings/{listing_id}/services:
    get:
      tags:
        - Services
      summary: List services for a listing
      operationId: listServices
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/ListingIdParam'
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/LimitParam'
      responses:
        '200':
          description: Services retrieved successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/PaginatedSuccessResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/ServiceOffering'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
    post:
      tags:
        - Services
      summary: Create a service offering
      operationId: createServiceOffering
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/ListingIdParam'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ServiceOfferingRequest'
      responses:
        '201':
          description: Service offering created successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/ServiceOffering'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/services/{service_id}:
    get:
      tags:
        - Services
      summary: Retrieve a service offering
      operationId: getServiceOffering
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/ServiceIdParam'
      responses:
        '200':
          description: Service offering retrieved successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/ServiceOffering'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
    put:
      tags:
        - Services
      summary: Update a service offering
      operationId: updateServiceOffering
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/ServiceIdParam'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ServiceOfferingRequest'
      responses:
        '200':
          description: Service offering updated successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/ServiceOffering'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
    delete:
      tags:
        - Services
      summary: Delete a service offering
      operationId: deleteServiceOffering
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/ServiceIdParam'
      responses:
        '200':
          description: Service offering deleted successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Acknowledgement'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/services/{service_id}/availability:
    post:
      tags:
        - Services
      summary: Create availability slots for a service
      operationId: createServiceAvailability
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/ServiceIdParam'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ServiceAvailabilityRequest'
      responses:
        '201':
          description: Service availability created successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/ServiceOffering'
              examples:
                serviceAvailabilityCreated:
                  value:
                    status: success
                    message: Availability slots recorded
                    data:
                      service_id: 720
                      listing_id: 310
                      service_name: Deep Tissue Massage
                      description: 60-minute massage session.
                      duration_minutes: 60
                      max_concurrent_customers: 2
                      is_available: true
                      price: 45.0
                      currency: USD
                      created_at: 2025-04-18T09:00:00Z
                      updated_at: 2025-11-07T12:20:00Z
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/services/{service_id}/availability/{date}:
    put:
      tags:
        - Services
      summary: Update availability slots for a specific date
      operationId: updateServiceAvailabilityDate
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/ServiceIdParam'
        - $ref: '#/components/parameters/DatePathParam'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ServiceAvailabilityUpdateRequest'
      responses:
        '200':
          description: Service availability updated successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/ServiceOffering'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/listings/{listing_id}/tours:
    get:
      tags:
        - Tours
      summary: List tour packages for a listing
      operationId: listTours
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/ListingIdParam'
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/LimitParam'
      responses:
        '200':
          description: Tours retrieved successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/PaginatedSuccessResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/TourPackage'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
    post:
      tags:
        - Tours
      summary: Create a tour package
      operationId: createTourPackage
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/ListingIdParam'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TourPackageRequest'
      responses:
        '201':
          description: Tour package created successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/TourPackage'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/tours/{tour_id}:
    get:
      tags:
        - Tours
      summary: Retrieve a tour package
      operationId: getTourPackage
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/TourIdParam'
      responses:
        '200':
          description: Tour package retrieved successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/TourPackage'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
    put:
      tags:
        - Tours
      summary: Update a tour package
      operationId: updateTourPackage
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/TourIdParam'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TourPackageRequest'
      responses:
        '200':
          description: Tour package updated successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/TourPackage'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
    delete:
      tags:
        - Tours
      summary: Delete a tour package
      operationId: deleteTourPackage
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/TourIdParam'
      responses:
        '200':
          description: Tour package deleted successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Acknowledgement'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/tours/{tour_id}/schedule:
    get:
      tags:
        - Tours
      summary: List tour schedule entries
      operationId: listTourSchedule
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/TourIdParam'
      responses:
        '200':
          description: Tour schedule retrieved successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/TourScheduleEntry'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
    post:
      tags:
        - Tours
      summary: Create schedule entries for a tour
      operationId: createTourSchedule
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/TourIdParam'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: array
              items:
                $ref: '#/components/schemas/TourScheduleRequest'
      responses:
        '201':
          description: Tour schedule created successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/TourScheduleEntry'
              examples:
                tourScheduleCreated:
                  value:
                    status: success
                    message: Tour schedule created
                    data:
                      - schedule_id: 9101
                        tour_id: 1200
                        start_time: 2025-11-10T07:00:00Z
                        end_time: 2025-11-10T16:00:00Z
                        capacity: 12
                        meeting_point: Kigali Convention Centre
                      - schedule_id: 9102
                        tour_id: 1200
                        start_time: 2025-11-12T07:00:00Z
                        end_time: 2025-11-12T16:00:00Z
                        capacity: 12
                        meeting_point: Kigali Convention Centre
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/tour-schedule/{schedule_id}:
    put:
      tags:
        - Tours
      summary: Update a tour schedule entry
      operationId: updateTourScheduleEntry
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/ScheduleIdParam'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TourScheduleRequest'
      responses:
        '200':
          description: Tour schedule entry updated successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/TourScheduleEntry'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
    delete:
      tags:
        - Tours
      summary: Delete a tour schedule entry
      operationId: deleteTourScheduleEntry
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/ScheduleIdParam'
      responses:
        '200':
          description: Tour schedule entry deleted successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Acknowledgement'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/tours/{tour_id}/addons:
    get:
      tags:
        - Tours
      summary: List tour add-ons
      operationId: listTourAddons
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/TourIdParam'
      responses:
        '200':
          description: Tour add-ons retrieved successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/TourAddon'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
    post:
      tags:
        - Tours
      summary: Create a tour add-on
      operationId: createTourAddon
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/TourIdParam'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TourAddonRequest'
      responses:
        '201':
          description: Tour add-on created successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/TourAddon'
              examples:
                tourAddonCreated:
                  value:
                    status: success
                    message: Tour add-on created
                    data:
                      addon_id: 5501
                      tour_id: 1200
                      name: Gorilla Trekking Permit
                      description: Includes park entry and guide.
                      price: 150.0
                      currency: USD
                      max_quantity: 6
                      created_at: 2025-06-01T08:00:00Z
                      updated_at: 2025-11-07T12:10:00Z
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/tour-addons/{addon_id}:
    put:
      tags:
        - Tours
      summary: Update a tour add-on
      operationId: updateTourAddon
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/AddonIdParam'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TourAddonRequest'
      responses:
        '200':
          description: Tour add-on updated successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/TourAddon'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
    delete:
      tags:
        - Tours
      summary: Delete a tour add-on
      operationId: deleteTourAddon
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/AddonIdParam'
      responses:
        '200':
          description: Tour add-on deleted successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Acknowledgement'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/bookings/availability:
    get:
      tags:
        - Booking Search
      summary: Search booking availability across listings
      operationId: searchBookingAvailability
      parameters:
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/LimitParam'
        - in: query
          name: listing_id
          schema:
            type: integer
            format: int64
          description: Filter by listing identifier
        - in: query
          name: booking_type
          schema:
            $ref: '#/components/schemas/BookingType'
          description: Filter by booking type
        - in: query
          name: start_date
          schema:
            type: string
            format: date
          description: Filter by start date
        - in: query
          name: end_date
          schema:
            type: string
            format: date
          description: Filter by end date
      responses:
        '200':
          description: Booking availability retrieved successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/PaginatedSuccessResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/BookingAvailabilityResult'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/bookings/check-availability:
    post:
      tags:
        - Booking Search
      summary: Check availability for a specific booking request
      operationId: checkBookingAvailability
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/BookingAvailabilityCheckRequest'
      responses:
        '200':
          description: Booking availability checked successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/BookingAvailabilityCheckResult'
              examples:
                availabilityChecked:
                  value:
                    status: success
                    message: Availability checked
                    data:
                      available: true
                      listing_id: 301
                      resource_id: 501
                      booking_type: hotel_stay
                      start_time: 2025-12-15T14:00:00Z
                      end_time: 2025-12-18T11:00:00Z
                      available_quantity: 3
                      price_per_unit: 120.0
                      currency: RWF
                      total_price: 360.0
                      message: Rooms available for selected dates
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/bookings/calendar/{listing_id}:
    get:
      tags:
        - Booking Search
      summary: Retrieve availability calendar for a listing
      operationId: getBookingCalendar
      parameters:
        - $ref: '#/components/parameters/ListingIdParam'
        - in: query
          name: from
          schema:
            type: string
            format: date
          description: Start date for calendar view
        - in: query
          name: to
          schema:
            type: string
            format: date
          description: End date for calendar view
        - in: query
          name: booking_type
          schema:
            $ref: '#/components/schemas/BookingType'
          description: Filter by booking type
      responses:
        '200':
          description: Booking calendar retrieved successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/BookingCalendar'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/bookings:
    get:
      tags:
        - Bookings
      summary: List bookings with filters
      operationId: listBookings
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/LimitParam'
        - $ref: '#/components/parameters/SortParam'
        - in: query
          name: status
          schema:
            $ref: '#/components/schemas/BookingStatus'
          description: Filter by booking status
        - in: query
          name: booking_type
          schema:
            $ref: '#/components/schemas/BookingType'
          description: Filter by booking type
        - in: query
          name: listing_id
          schema:
            type: integer
            format: int64
          description: Filter by listing identifier
      responses:
        '200':
          description: Bookings retrieved successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/PaginatedSuccessResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/Booking'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'
    post:
      tags:
        - Bookings
      summary: Create a new booking
      operationId: createBooking
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/BookingCreateRequest'
      responses:
        '201':
          description: Booking created successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Booking'
              examples:
                bookingCreated:
                  value:
                    status: success
                    message: Booking created successfully
                    data:
                      booking_id: 8001
                      user_id: 2001
                      listing_id: 301
                      resource_id: 501
                      booking_type: hotel_stay
                      status: confirmed
                      start_time: 2025-12-15T14:00:00Z
                      end_time: 2025-12-18T11:00:00Z
                      quantity: 1
                      guest_count: 2
                      base_amount: 360.0
                      tax_amount: 54.0
                      service_fee: 18.0
                      total_amount: 432.0
                      currency: RWF
                      confirmation_code: BK-2025-8001
                      special_requests: Late checkout preferred
                      created_at: 2025-11-07T14:30:00Z
                      confirmed_at: 2025-11-07T14:30:00Z
                      updated_at: 2025-11-07T14:30:00Z
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/bookings/user:
    get:
      tags:
        - Bookings
      summary: Retrieve bookings for the authenticated user (my trips)
      operationId: getUserBookings
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/LimitParam'
        - $ref: '#/components/parameters/SortParam'
        - in: query
          name: status
          schema:
            $ref: '#/components/schemas/BookingStatus'
          description: Filter by booking status
      responses:
        '200':
          description: User bookings retrieved successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/PaginatedSuccessResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/Booking'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/bookings/merchant:
    get:
      tags:
        - Bookings
      summary: Retrieve bookings for the authenticated merchant (my guests)
      operationId: getMerchantBookings
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/LimitParam'
        - $ref: '#/components/parameters/SortParam'
        - in: query
          name: status
          schema:
            $ref: '#/components/schemas/BookingStatus'
          description: Filter by booking status
        - in: query
          name: listing_id
          schema:
            type: integer
            format: int64
          description: Filter by listing identifier
      responses:
        '200':
          description: Merchant bookings retrieved successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/PaginatedSuccessResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/Booking'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/bookings/{booking_id}:
    get:
      tags:
        - Bookings
      summary: Retrieve a booking by identifier
      operationId: getBookingById
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/BookingIdParam'
      responses:
        '200':
          description: Booking retrieved successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Booking'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
    put:
      tags:
        - Bookings
      summary: Update a booking
      operationId: updateBooking
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/BookingIdParam'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/BookingUpdateRequest'
      responses:
        '200':
          description: Booking updated successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Booking'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
    delete:
      tags:
        - Bookings
      summary: Cancel a booking
      operationId: cancelBooking
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/BookingIdParam'
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
              properties:
                cancellation_reason:
                  type: string
      responses:
        '200':
          description: Booking cancelled successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Booking'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/bookings/{booking_id}/status:
    patch:
      tags:
        - Bookings
      summary: Update booking status
      operationId: updateBookingStatus
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/BookingIdParam'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/BookingStatusUpdateRequest'
      responses:
        '200':
          description: Booking status updated successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Booking'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/bookings/{booking_id}/participants:
    get:
      tags:
        - Booking Participants
      summary: List participants for a booking
      operationId: listBookingParticipants
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/BookingIdParam'
      responses:
        '200':
          description: Booking participants retrieved successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/BookingParticipant'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
    post:
      tags:
        - Booking Participants
      summary: Add a participant to a booking
      operationId: createBookingParticipant
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/BookingIdParam'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/BookingParticipantRequest'
      responses:
        '201':
          description: Booking participant added successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/BookingParticipant'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/bookings/{booking_id}/participants/{participant_id}:
    put:
      tags:
        - Booking Participants
      summary: Update a booking participant
      operationId: updateBookingParticipant
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/BookingIdParam'
        - $ref: '#/components/parameters/ParticipantIdParam'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/BookingParticipantRequest'
      responses:
        '200':
          description: Booking participant updated successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/BookingParticipant'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
    delete:
      tags:
        - Booking Participants
      summary: Remove a booking participant
      operationId: deleteBookingParticipant
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/BookingIdParam'
        - $ref: '#/components/parameters/ParticipantIdParam'
      responses:
        '200':
          description: Booking participant removed successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Acknowledgement'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/bookings/{booking_id}/addons:
    get:
      tags:
        - Booking Add-ons
      summary: List add-ons for a booking
      operationId: listBookingAddons
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/BookingIdParam'
      responses:
        '200':
          description: Booking add-ons retrieved successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/BookingAddon'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
    post:
      tags:
        - Booking Add-ons
      summary: Add an add-on to a booking
      operationId: createBookingAddon
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/BookingIdParam'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/BookingAddonRequest'
      responses:
        '201':
          description: Booking add-on added successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/BookingAddon'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/bookings/{booking_id}/addons/{addon_id}:
    put:
      tags:
        - Booking Add-ons
      summary: Update a booking add-on
      operationId: updateBookingAddon
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/BookingIdParam'
        - $ref: '#/components/parameters/BookingAddonIdParam'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/BookingAddonRequest'
      responses:
        '200':
          description: Booking add-on updated successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/BookingAddon'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
    delete:
      tags:
        - Booking Add-ons
      summary: Remove a booking add-on
      operationId: deleteBookingAddon
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/BookingIdParam'
        - $ref: '#/components/parameters/BookingAddonIdParam'
      responses:
        '200':
          description: Booking add-on removed successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Acknowledgement'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/bookings/{booking_id}/checkin:
    post:
      tags:
        - Booking Check-in/Check-out
      summary: Check in a booking
      operationId: checkInBooking
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/BookingIdParam'
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
              properties:
                checkin_time:
                  type: string
                  format: date-time
                notes:
                  type: string
      responses:
        '200':
          description: Booking checked in successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Booking'
              examples:
                bookingCheckedIn:
                  value:
                    status: success
                    message: Booking checked in successfully
                    data:
                      booking_id: 8001
                      user_id: 2001
                      listing_id: 301
                      resource_id: 501
                      booking_type: hotel_stay
                      status: checked_in
                      start_time: 2025-12-15T14:00:00Z
                      end_time: 2025-12-18T11:00:00Z
                      confirmation_code: BK-2025-8001
                      created_at: 2025-11-07T14:30:00Z
                      confirmed_at: 2025-11-07T14:30:00Z
                      updated_at: 2025-12-15T14:15:00Z
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/bookings/{booking_id}/checkout:
    post:
      tags:
        - Booking Check-in/Check-out
      summary: Check out a booking
      operationId: checkOutBooking
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/BookingIdParam'
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
              properties:
                checkout_time:
                  type: string
                  format: date-time
                notes:
                  type: string
      responses:
        '200':
          description: Booking checked out successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Booking'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/bookings/{booking_id}/participants/{participant_id}/checkin:
    post:
      tags:
        - Booking Check-in/Check-out
      summary: Check in a specific participant
      operationId: checkInParticipant
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/BookingIdParam'
        - $ref: '#/components/parameters/ParticipantIdParam'
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
              properties:
                checkin_time:
                  type: string
                  format: date-time
                notes:
                  type: string
      responses:
        '200':
          description: Participant checked in successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/BookingParticipant'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/orders:
    get:
      tags:
        - Orders
      summary: List orders with filters
      operationId: listOrders
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/LimitParam'
        - $ref: '#/components/parameters/SortParam'
        - in: query
          name: status
          schema:
            $ref: '#/components/schemas/OrderStatus'
          description: Filter by order status
        - in: query
          name: listing_id
          schema:
            type: integer
            format: int64
          description: Filter by listing identifier
      responses:
        '200':
          description: Orders retrieved successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/PaginatedSuccessResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/Order'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'
    post:
      tags:
        - Orders
      summary: Create a new order
      operationId: createOrder
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/OrderCreateRequest'
      responses:
        '201':
          description: Order created successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Order'
              examples:
                orderCreated:
                  value:
                    status: success
                    message: Order created successfully
                    data:
                      order_id: 9001
                      user_id: 2001
                      listing_id: 305
                      product_id: 5402
                      quantity: 2
                      status: confirmed
                      total_amount: 37.0
                      currency: USD
                      payment_id: 10001
                      shipping_address:
                        street: "KG 123 St"
                        city: Kigali
                        district: Nyarugenge
                        country: Rwanda
                      tracking_number: TRK-2025-9001
                      created_at: 2025-11-07T15:00:00Z
                      updated_at: 2025-11-07T15:00:00Z
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/orders/{order_id}:
    get:
      tags:
        - Orders
      summary: Retrieve an order by identifier
      operationId: getOrderById
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/OrderIdParam'
      responses:
        '200':
          description: Order retrieved successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Order'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
    put:
      tags:
        - Orders
      summary: Update an order
      operationId: updateOrder
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/OrderIdParam'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/OrderUpdateRequest'
      responses:
        '200':
          description: Order updated successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Order'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
    delete:
      tags:
        - Orders
      summary: Cancel an order
      operationId: cancelOrder
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/OrderIdParam'
      responses:
        '200':
          description: Order cancelled successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Order'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/orders/{order_id}/status:
    patch:
      tags:
        - Orders
      summary: Update order status
      operationId: updateOrderStatus
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/OrderIdParam'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/OrderStatusUpdateRequest'
      responses:
        '200':
          description: Order status updated successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Order'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/merchants/apply:
    post:
      tags:
        - Merchant Onboarding
      summary: Submit a merchant application
      operationId: submitMerchantApplication
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MerchantApplicationRequest'
      responses:
        '201':
          description: Merchant application submitted successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Merchant'
              examples:
                merchantApplication:
                  value:
                    status: success
                    message: Merchant application submitted
                    data:
                      merchant_id: 101
                      user_id: 55
                      business_name: Sunrise Hotel
                      description: Boutique hotel in Kigali city center.
                      category: hotel
                      contact_phone: '+250788123456'
                      contact_email: info@sunrisehotel.rw
                      business_license: LIC-2025-001
                      is_verified: false
                      status: pending
                      onboarding_status: in_review
                      agent_id: 12
                      created_at: 2025-11-07T09:30:00Z
                      updated_at: 2025-11-07T09:30:00Z
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/merchants/onboarding-status:
    get:
      tags:
        - Merchant Onboarding
      summary: Retrieve current merchant onboarding status
      operationId: getMerchantOnboardingStatus
      security:
        - BearerAuth: []
      responses:
        '200':
          description: Merchant onboarding status retrieved
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/MerchantOnboardingStatus'
              examples:
                onboardingStatus:
                  value:
                    status: success
                    message: Onboarding status retrieved
                    data:
                      merchant_id: 101
                      onboarding_status: in_review
                      status: pending
                      required_documents:
                        - business_license
                        - tax_clearance
                      submitted_documents:
                        - business_license
                      missing_documents:
                        - tax_clearance
                      last_reviewed_at: 2025-11-07T10:15:00Z
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/merchants/onboarding/{merchant_id}:
    put:
      tags:
        - Merchant Onboarding
      summary: Update merchant onboarding status
      operationId: updateMerchantOnboardingStatus
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/MerchantIdParam'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MerchantOnboardingUpdateRequest'
      responses:
        '200':
          description: Merchant onboarding status updated
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/MerchantOnboardingStatus'
              examples:
                updatedOnboarding:
                  value:
                    status: success
                    message: Merchant onboarding status updated
                    data:
                      merchant_id: 101
                      onboarding_status: approved
                      status: active
                      required_documents:
                        - business_license
                        - tax_clearance
                      submitted_documents:
                        - business_license
                        - tax_clearance
                      missing_documents: []
                      last_reviewed_at: 2025-11-07T12:05:00Z
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/merchants/{merchant_id}/documents:
    post:
      tags:
        - Merchant Onboarding
      summary: Upload a merchant onboarding document
      operationId: uploadMerchantDocument
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/MerchantIdParam'
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/MerchantDocumentUploadRequest'
      responses:
        '201':
          description: Merchant document uploaded successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/MerchantDocument'
              examples:
                documentUploaded:
                  value:
                    status: success
                    message: Document uploaded successfully
                    data:
                      document_id: 501
                      merchant_id: 101
                      document_type: tax_clearance
                      file_name: tax-clearance-2025.pdf
                      uploaded_at: 2025-11-07T09:45:00Z
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/merchants/me:
    get:
      tags:
        - Merchant Profile
      summary: Get the authenticated merchant profile
      operationId: getOwnMerchantProfile
      security:
        - BearerAuth: []
      responses:
        '200':
          description: Merchant profile retrieved
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Merchant'
              examples:
                merchantProfile:
                  value:
                    status: success
                    message: Merchant profile retrieved
                    data:
                      merchant_id: 101
                      user_id: 55
                      business_name: Sunrise Hotel
                      description: Boutique hotel in Kigali city center.
                      category: hotel
                      contact_phone: '+250788123456'
                      contact_email: info@sunrisehotel.rw
                      business_license: LIC-2025-001
                      is_verified: true
                      status: active
                      onboarding_status: approved
                      agent_id: 12
                      created_at: 2025-01-15T08:00:00Z
                      updated_at: 2025-11-07T10:00:00Z
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'
    put:
      tags:
        - Merchant Profile
      summary: Update the authenticated merchant profile
      operationId: updateOwnMerchantProfile
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MerchantUpdateRequest'
      responses:
        '200':
          description: Merchant profile updated
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Merchant'
              examples:
                merchantUpdated:
                  value:
                    status: success
                    message: Merchant profile updated
                    data:
                      merchant_id: 101
                      user_id: 55
                      business_name: Sunrise Hotel & Spa
                      description: Luxury boutique hotel with spa services.
                      category: hotel
                      contact_phone: '+250788123456'
                      contact_email: hello@sunrisehotel.rw
                      business_license: LIC-2025-001
                      is_verified: true
                      status: active
                      onboarding_status: approved
                      agent_id: 12
                      created_at: 2025-01-15T08:00:00Z
                      updated_at: 2025-11-07T12:30:00Z
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/merchants/{merchant_id}:
    get:
      tags:
        - Merchant Profile
      summary: Get merchant profile by identifier
      operationId: getMerchantById
      parameters:
        - $ref: '#/components/parameters/MerchantIdParam'
      responses:
        '200':
          description: Merchant profile retrieved
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Merchant'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/merchants/search:
    get:
      tags:
        - Merchant Profile
      summary: Search merchants with filters
      operationId: searchMerchants
      parameters:
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/LimitParam'
        - $ref: '#/components/parameters/SortParam'
        - $ref: '#/components/parameters/SearchParam'
        - in: query
          name: category
          schema:
            $ref: '#/components/schemas/MerchantCategory'
          description: Filter by merchant category
        - in: query
          name: city
          schema:
            type: string
          description: Filter by city
        - in: query
          name: status
          schema:
            $ref: '#/components/schemas/MerchantStatus'
          description: Filter by merchant account status
      responses:
        '200':
          description: Merchant search results retrieved
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/PaginatedSuccessResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/Merchant'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/merchants/me/locations:
    get:
      tags:
        - Merchant Locations
      summary: List merchant locations
      operationId: listMerchantLocations
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/LimitParam'
        - $ref: '#/components/parameters/SortParam'
        - in: query
          name: city
          schema:
            type: string
          description: Filter by city name
        - in: query
          name: district
          schema:
            type: string
          description: Filter by district
        - in: query
          name: neighborhood
          schema:
            type: string
          description: Filter by neighborhood
      responses:
        '200':
          description: Merchant locations retrieved
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/PaginatedSuccessResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/MerchantLocation'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'
    post:
      tags:
        - Merchant Locations
      summary: Create a merchant location
      operationId: createMerchantLocation
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MerchantLocationRequest'
      responses:
        '201':
          description: Merchant location created
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/MerchantLocation'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/merchants/me/locations/{location_id}:
    put:
      tags:
        - Merchant Locations
      summary: Update a merchant location
      operationId: updateMerchantLocation
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/LocationIdParam'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MerchantLocationRequest'
      responses:
        '200':
          description: Merchant location updated
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/MerchantLocation'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
    delete:
      tags:
        - Merchant Locations
      summary: Archive a merchant location
      operationId: deleteMerchantLocation
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/LocationIdParam'
      responses:
        '200':
          description: Merchant location archived
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/MerchantLocation'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/merchants/me/subscriptions:
    get:
      tags:
        - Merchant Subscriptions
      summary: List merchant subscriptions
      operationId: listMerchantSubscriptions
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/LimitParam'
        - $ref: '#/components/parameters/SortParam'
        - in: query
          name: status
          schema:
            $ref: '#/components/schemas/MerchantSubscriptionStatus'
          description: Filter by subscription status
      responses:
        '200':
          description: Merchant subscriptions retrieved
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/PaginatedSuccessResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/MerchantSubscription'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'
    post:
      tags:
        - Merchant Subscriptions
      summary: Create a merchant subscription
      operationId: createMerchantSubscription
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MerchantSubscriptionRequest'
      responses:
        '201':
          description: Merchant subscription created
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/MerchantSubscription'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/merchants/me/subscriptions/{subscription_id}:
    put:
      tags:
        - Merchant Subscriptions
      summary: Update a merchant subscription
      operationId: updateMerchantSubscription
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/SubscriptionIdParam'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MerchantSubscriptionRequest'
      responses:
        '200':
          description: Merchant subscription updated
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/MerchantSubscription'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
    delete:
      tags:
        - Merchant Subscriptions
      summary: Cancel a merchant subscription
      operationId: deleteMerchantSubscription
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/SubscriptionIdParam'
      responses:
        '200':
          description: Merchant subscription cancelled
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/MerchantSubscription'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/merchants/me/promotions:
    get:
      tags:
        - Merchant Promotions
      summary: List merchant promotions
      operationId: listMerchantPromotions
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/LimitParam'
        - $ref: '#/components/parameters/SortParam'
        - in: query
          name: status
          schema:
            $ref: '#/components/schemas/MerchantPromotionStatus'
          description: Filter by promotion status
        - in: query
          name: promotion_type
          schema:
            $ref: '#/components/schemas/MerchantPromotionType'
          description: Filter by promotion type
      responses:
        '200':
          description: Merchant promotions retrieved
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/PaginatedSuccessResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/MerchantPromotion'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'
    post:
      tags:
        - Merchant Promotions
      summary: Create a merchant promotion
      operationId: createMerchantPromotion
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MerchantPromotionRequest'
      responses:
        '201':
          description: Merchant promotion created
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/MerchantPromotion'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/merchants/me/promotions/{promotion_id}:
    put:
      tags:
        - Merchant Promotions
      summary: Update a merchant promotion
      operationId: updateMerchantPromotion
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/PromotionIdParam'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MerchantPromotionRequest'
      responses:
        '200':
          description: Merchant promotion updated
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/MerchantPromotion'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
    delete:
      tags:
        - Merchant Promotions
      summary: Archive a merchant promotion
      operationId: deleteMerchantPromotion
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/PromotionIdParam'
      responses:
        '200':
          description: Merchant promotion archived
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/MerchantPromotion'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
components:
  securitySchemes:
    BearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
  parameters:
    PageParam:
      in: query
      name: page
      schema:
        type: integer
        minimum: 1
        default: 1
      description: Page number for pagination
    LimitParam:
      in: query
      name: limit
      schema:
        type: integer
        minimum: 1
        maximum: 100
        default: 20
      description: Number of items per page
    SortParam:
      in: query
      name: sort
      schema:
        type: string
      description: Sort expression (e.g., business_name:asc)
    SearchParam:
      in: query
      name: search
      schema:
        type: string
      description: Free text search query
    UserIdParam:
      in: path
      name: user_id
      required: true
      schema:
        type: integer
        format: int64
      description: Unique user identifier
    AgentIdParam:
      in: path
      name: agent_id
      required: true
      schema:
        type: integer
        format: int64
      description: Unique agent identifier
    MerchantIdParam:
      in: path
      name: merchant_id
      required: true
      schema:
        type: integer
        format: int64
      description: Unique merchant identifier
    SavedLocationIdParam:
      in: path
      name: saved_location_id
      required: true
      schema:
        type: integer
        format: int64
      description: Unique saved location identifier
    ListingIdParam:
      in: path
      name: listing_id
      required: true
      schema:
        type: integer
        format: int64
      description: Unique listing identifier
    SearchIdParam:
      in: path
      name: search_id
      required: true
      schema:
        type: integer
        format: int64
      description: Unique search history identifier
    CommissionIdParam:
      in: path
      name: commission_id
      required: true
      schema:
        type: integer
        format: int64
      description: Unique commission identifier
    LocationIdParam:
      in: path
      name: location_id
      required: true
      schema:
        type: integer
        format: int64
      description: Unique location identifier
    SubscriptionIdParam:
      in: path
      name: subscription_id
      required: true
      schema:
        type: integer
        format: int64
      description: Unique subscription identifier
    PromotionIdParam:
      in: path
      name: promotion_id
      required: true
      schema:
        type: integer
        format: int64
      description: Unique promotion identifier
    LeaderboardPeriodParam:
      in: path
      name: period
      required: true
      schema:
        $ref: '#/components/schemas/LeaderboardPeriod'
      description: Leaderboard aggregation period
    RoomTypeIdParam:
      in: path
      name: room_type_id
      required: true
      schema:
        type: integer
        format: int64
      description: Unique hotel room type identifier
    RatePlanIdParam:
      in: path
      name: rate_plan_id
      required: true
      schema:
        type: integer
        format: int64
      description: Unique rate plan identifier
    EventIdParam:
      in: path
      name: event_id
      required: true
      schema:
        type: integer
        format: int64
      description: Unique event identifier
    TicketTierIdParam:
      in: path
      name: tier_id
      required: true
      schema:
        type: integer
        format: int64
      description: Unique ticket tier identifier
    TableIdParam:
      in: path
      name: table_id
      required: true
      schema:
        type: integer
        format: int64
      description: Unique restaurant table identifier
    ProductIdParam:
      in: path
      name: product_id
      required: true
      schema:
        type: integer
        format: int64
      description: Unique product identifier
    ServiceIdParam:
      in: path
      name: service_id
      required: true
      schema:
        type: integer
        format: int64
      description: Unique service identifier
    TourIdParam:
      in: path
      name: tour_id
      required: true
      schema:
        type: integer
        format: int64
      description: Unique tour identifier
    ScheduleIdParam:
      in: path
      name: schedule_id
      required: true
      schema:
        type: integer
        format: int64
      description: Unique tour schedule identifier
    AddonIdParam:
      in: path
      name: addon_id
      required: true
      schema:
        type: integer
        format: int64
      description: Unique tour add-on identifier
    DatePathParam:
      in: path
      name: date
      required: true
      schema:
        type: string
        format: date
      description: ISO-8601 calendar date
    BookingIdParam:
      in: path
      name: booking_id
      required: true
      schema:
        type: integer
        format: int64
      description: Unique booking identifier
    OrderIdParam:
      in: path
      name: order_id
      required: true
      schema:
        type: integer
        format: int64
      description: Unique order identifier
    ParticipantIdParam:
      in: path
      name: participant_id
      required: true
      schema:
        type: integer
        format: int64
      description: Unique booking participant identifier
    BookingAddonIdParam:
      in: path
      name: addon_id
      required: true
      schema:
        type: integer
        format: int64
      description: Unique booking add-on identifier
  responses:
    BadRequestError:
      description: The request payload or parameters were invalid
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          examples:
            badRequest:
              value:
                status: error
                message: Validation failed
                error:
                  code: MERCHANT_VALIDATION_ERROR
                  details:
                    - field: business_name
                      issue: Business name is required
    UnauthorizedError:
      description: Authentication credentials are missing or invalid
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          examples:
            unauthorized:
              value:
                status: error
                message: Authentication failed
                error:
                  code: AUTH_INVALID_TOKEN
                  details: []
    NotFoundError:
      description: The requested resource was not found
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          examples:
            notFound:
              value:
                status: error
                message: Merchant not found
                error:
                  code: MERCHANT_NOT_FOUND
                  details: []
    InternalServerError:
      description: Unexpected server error occurred
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          examples:
            serverError:
              value:
                status: error
                message: Unexpected error occurred
                error:
                  code: INTERNAL_SERVER_ERROR
                  details: []
  schemas:
    SuccessResponse:
      type: object
      required:
        - status
        - message
        - data
      properties:
        status:
          type: string
          enum: [success]
        message:
          type: string
        data:
          description: Response payload container
    PaginatedSuccessResponse:
      type: object
      required:
        - status
        - message
        - data
        - pagination
      properties:
        status:
          type: string
          enum: [success]
        message:
          type: string
        data:
          type: array
          items:
            description: Placeholder for paginated data items
        pagination:
          type: object
          required:
            - page
            - limit
            - total
            - totalPages
          properties:
            page:
              type: integer
            limit:
              type: integer
            total:
              type: integer
            totalPages:
              type: integer
    ErrorResponse:
      type: object
      required:
        - status
        - message
        - error
      properties:
        status:
          type: string
          enum: [error]
        message:
          type: string
        error:
          type: object
          required:
            - code
            - details
          properties:
            code:
              type: string
            details:
              type: array
              items:
                type: object
                properties:
                  field:
                    type: string
                  issue:
                    type: string
                  pointer:
                    type: string
                    description: JSON pointer to the field in error
    AuthTokens:
      type: object
      required:
        - access_token
        - refresh_token
        - expires_in
      properties:
        access_token:
          type: string
        refresh_token:
          type: string
        expires_in:
          type: integer
          description: Lifetime of the access token in seconds
    AuthResponse:
      type: object
      required:
        - user
        - tokens
      properties:
        user:
          $ref: '#/components/schemas/User'
        tokens:
          $ref: '#/components/schemas/AuthTokens'
    Acknowledgement:
      type: object
      required:
        - acknowledged
      properties:
        acknowledged:
          type: boolean
        reference_id:
          type: string
          nullable: true
    PasswordResetDispatch:
      type: object
      required:
        - email
        - reset_token_sent
      properties:
        email:
          type: string
          format: email
        reset_token_sent:
          type: boolean
        expires_in:
          type: integer
          nullable: true
          description: Number of seconds until reset token expires
    PasswordResetResult:
      type: object
      required:
        - password_reset
      properties:
        password_reset:
          type: boolean
    EmailVerificationResult:
      type: object
      required:
        - verified
      properties:
        verified:
          type: boolean
    AccountDeletionResult:
      type: object
      required:
        - deactivated
      properties:
        deactivated:
          type: boolean
        scheduled_at:
          type: string
          format: date-time
          nullable: true
          description: When the account will be fully purged, if applicable
    SearchHistoryClearResult:
      type: object
      required:
        - cleared
      properties:
        cleared:
          type: boolean
        removed_count:
          type: integer
          nullable: true
    SearchHistoryDeleteResult:
      type: object
      required:
        - deleted
      properties:
        deleted:
          type: boolean
        search_id:
          type: integer
          format: int64
    User:
      type: object
      required:
        - user_id
        - first_name
        - last_name
        - email
        - is_verified
        - created_at
        - updated_at
      properties:
        user_id:
          type: integer
          format: int64
        first_name:
          type: string
        last_name:
          type: string
        email:
          type: string
          format: email
        phone_number:
          type: string
          nullable: true
        avatar_url:
          type: string
          format: uri
          nullable: true
        default_city:
          type: string
          nullable: true
        is_verified:
          type: boolean
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
    UserRegistrationRequest:
      type: object
      required:
        - first_name
        - last_name
        - email
        - password
      properties:
        first_name:
          type: string
          maxLength: 120
        last_name:
          type: string
          maxLength: 120
        email:
          type: string
          format: email
        phone_number:
          type: string
        password:
          type: string
          format: password
          minLength: 8
        default_city:
          type: string
        referral_code:
          type: string
          nullable: true
    UserLoginRequest:
      type: object
      required:
        - email
        - password
      properties:
        email:
          type: string
          format: email
        password:
          type: string
          format: password
    RefreshTokenRequest:
      type: object
      required:
        - refresh_token
      properties:
        refresh_token:
          type: string
    ForgotPasswordRequest:
      type: object
      required:
        - email
      properties:
        email:
          type: string
          format: email
    ResetPasswordRequest:
      type: object
      required:
        - token
        - new_password
      properties:
        token:
          type: string
        new_password:
          type: string
          format: password
          minLength: 8
    VerifyEmailRequest:
      type: object
      required:
        - token
      properties:
        token:
          type: string
    UserProfileUpdateRequest:
      type: object
      required:
        - first_name
        - last_name
        - email
      properties:
        first_name:
          type: string
        last_name:
          type: string
        email:
          type: string
          format: email
        phone_number:
          type: string
        default_city:
          type: string
        avatar_url:
          type: string
          format: uri
    UserProfilePatchRequest:
      type: object
      properties:
        first_name:
          type: string
        last_name:
          type: string
        email:
          type: string
          format: email
        phone_number:
          type: string
        default_city:
          type: string
        avatar_url:
          type: string
          format: uri
    UserAvatarUploadRequest:
      type: object
      required:
        - avatar
      properties:
        avatar:
          type: string
          format: binary
    SavedLocationRequest:
      type: object
      required:
        - city
        - district
        - label
      properties:
        city:
          type: string
        district:
          type: string
        neighborhood:
          type: string
        label:
          type: string
        latitude:
          type: number
          format: float
        longitude:
          type: number
          format: float
    SavedLocation:
      type: object
      required:
        - saved_location_id
        - user_id
        - city
        - district
        - label
        - created_at
      properties:
        saved_location_id:
          type: integer
          format: int64
        user_id:
          type: integer
          format: int64
        city:
          type: string
        district:
          type: string
        neighborhood:
          type: string
          nullable: true
        label:
          type: string
        latitude:
          type: number
          format: float
          nullable: true
        longitude:
          type: number
          format: float
          nullable: true
        created_at:
          type: string
          format: date-time
    UserFavoriteRequest:
      type: object
      required:
        - listing_id
      properties:
        listing_id:
          type: integer
          format: int64
    UserFavorite:
      type: object
      required:
        - favorite_id
        - user_id
        - listing_id
        - created_at
      properties:
        favorite_id:
          type: integer
          format: int64
        user_id:
          type: integer
          format: int64
        listing_id:
          type: integer
          format: int64
        created_at:
          type: string
          format: date-time
    UserSearchHistoryEntry:
      type: object
      required:
        - search_id
        - user_id
        - search_query
        - searched_at
      properties:
        search_id:
          type: integer
          format: int64
        user_id:
          type: integer
          format: int64
        search_query:
          type: string
        filters:
          type: object
          additionalProperties: true
          nullable: true
        location:
          type: string
          nullable: true
        searched_at:
          type: string
          format: date-time
    AgentTier:
      type: string
      enum:
        - bronze
        - silver
        - gold
    AgentBadge:
      type: string
      enum:
        - top_performer
        - certified
        - elite
    Agent:
      type: object
      required:
        - agent_id
        - user_id
        - agent_code
        - tier
        - commission_balance
        - total_earnings
        - momo_number
        - successful_referrals
        - is_certified
        - joined_at
        - updated_at
      properties:
        agent_id:
          type: integer
          format: int64
        user_id:
          type: integer
          format: int64
        agent_code:
          type: string
        tier:
          $ref: '#/components/schemas/AgentTier'
        badge:
          $ref: '#/components/schemas/AgentBadge'
          nullable: true
        commission_balance:
          type: number
          format: float
        total_earnings:
          type: number
          format: float
        momo_number:
          type: string
        leaderboard_rank:
          type: integer
          nullable: true
        successful_referrals:
          type: integer
        is_certified:
          type: boolean
        joined_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
    AgentApplicationRequest:
      type: object
      required:
        - momo_number
        - experience_summary
      properties:
        momo_number:
          type: string
        experience_summary:
          type: string
        preferred_tier:
          $ref: '#/components/schemas/AgentTier'
          nullable: true
        regions_served:
          type: array
          items:
            type: string
        referral_code:
          type: string
          nullable: true
    AgentProfileUpdateRequest:
      type: object
      properties:
        momo_number:
          type: string
        badge:
          $ref: '#/components/schemas/AgentBadge'
        tier:
          $ref: '#/components/schemas/AgentTier'
        status_note:
          type: string
        leaderboard_rank:
          type: integer
        is_certified:
          type: boolean
    AgentOnboardUserRequest:
      type: object
      required:
        - first_name
        - last_name
        - phone_number
      properties:
        first_name:
          type: string
        last_name:
          type: string
        email:
          type: string
          format: email
          nullable: true
        phone_number:
          type: string
        city:
          type: string
          nullable: true
        referral_code:
          type: string
          nullable: true
    AgentOnboardMerchantRequest:
      type: object
      required:
        - business_name
        - contact_phone
        - category
      properties:
        business_name:
          type: string
        contact_person:
          type: string
          nullable: true
        contact_email:
          type: string
          format: email
          nullable: true
        contact_phone:
          type: string
        category:
          $ref: '#/components/schemas/MerchantCategory'
        city:
          type: string
          nullable: true
        district:
          type: string
          nullable: true
        notes:
          type: string
          nullable: true
    AgentOnboardingResult:
      type: object
      required:
        - resource_type
        - resource_id
        - commission_awarded
      properties:
        resource_type:
          type: string
          enum:
            - user
            - merchant
        resource_id:
          type: integer
          format: int64
        commission_awarded:
          type: number
          format: float
        currency:
          type: string
        referral_code:
          type: string
          nullable: true
    AgentOnboardingStats:
      type: object
      required:
        - total_users_onboarded
        - total_merchants_onboarded
        - conversions_last_30_days
      properties:
        total_users_onboarded:
          type: integer
        total_merchants_onboarded:
          type: integer
        active_merchants:
          type: integer
        active_users:
          type: integer
        conversions_last_30_days:
          type: integer
        pending_applications:
          type: integer
        last_synced_at:
          type: string
          format: date-time
          nullable: true
    CommissionStatus:
      type: string
      enum:
        - pending
        - paid
    CommissionType:
      type: string
      enum:
        - subscription
        - booking
        - order
    Commission:
      type: object
      required:
        - commission_id
        - agent_id
        - commission_type
        - amount
        - currency
        - status
        - created_at
      properties:
        commission_id:
          type: integer
          format: int64
        agent_id:
          type: integer
          format: int64
        merchant_id:
          type: integer
          format: int64
          nullable: true
        user_id:
          type: integer
          format: int64
          nullable: true
        commission_type:
          $ref: '#/components/schemas/CommissionType'
        amount:
          type: number
          format: float
        currency:
          type: string
        status:
          $ref: '#/components/schemas/CommissionStatus'
        related_id:
          type: integer
          format: int64
          nullable: true
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
          nullable: true
    CommissionSummary:
      type: object
      required:
        - total_commissions
        - pending_amount
        - paid_amount
      properties:
        total_commissions:
          type: number
          format: float
        pending_amount:
          type: number
          format: float
        paid_amount:
          type: number
          format: float
        total_transactions:
          type: integer
        last_payout_at:
          type: string
          format: date-time
          nullable: true
    CommissionPayoutResult:
      type: object
      required:
        - payout_initiated
      properties:
        payout_initiated:
          type: boolean
        payout_reference:
          type: string
          nullable: true
        expected_settlement_at:
          type: string
          format: date-time
          nullable: true
    LeaderboardPeriod:
      type: string
      enum:
        - daily
        - weekly
        - monthly
    AgentLeaderboardEntry:
      type: object
      required:
        - rank
        - agent_id
        - agent_code
        - tier
        - points
        - period
      properties:
        rank:
          type: integer
        agent_id:
          type: integer
          format: int64
        agent_code:
          type: string
        agent_name:
          type: string
          nullable: true
        tier:
          $ref: '#/components/schemas/AgentTier'
        badge:
          $ref: '#/components/schemas/AgentBadge'
          nullable: true
        points:
          type: integer
        period:
          $ref: '#/components/schemas/LeaderboardPeriod'
        successful_referrals:
          type: integer
        commission_earned:
          type: number
          format: float
        city:
          type: string
          nullable: true
    AgentLeaderboardPosition:
      type: object
      required:
        - rank
        - period
        - points
        - total_agents
      properties:
        rank:
          type: integer
        period:
          $ref: '#/components/schemas/LeaderboardPeriod'
        points:
          type: integer
        total_agents:
          type: integer
        percentile:
          type: number
          format: float
          nullable: true
    AgentAnalytics:
      type: object
      required:
        - summary
      properties:
        summary:
          type: object
          required:
            - total_commissions
            - total_clients
            - active_merchants
            - active_users
          properties:
            total_commissions:
              type: number
              format: float
            total_clients:
              type: integer
            active_merchants:
              type: integer
            active_users:
              type: integer
            conversion_rate:
              type: number
              format: float
        weekly_trends:
          type: array
          items:
            type: object
            required:
              - week_start
              - commissions
              - onboardings
            properties:
              week_start:
                type: string
                format: date
              commissions:
                type: number
                format: float
              onboardings:
                type: integer
        top_merchants:
          type: array
          items:
            type: object
            required:
              - merchant_id
              - business_name
              - revenue_contribution
            properties:
              merchant_id:
                type: integer
                format: int64
              business_name:
                type: string
              revenue_contribution:
                type: number
                format: float
        generated_at:
          type: string
          format: date-time
    AgentPerformance:
      type: object
      required:
        - period
        - metrics
      properties:
        period:
          $ref: '#/components/schemas/LeaderboardPeriod'
        metrics:
          type: object
          required:
            - onboarded_users
            - onboarded_merchants
            - conversion_rate
            - commissions_earned
          properties:
            onboarded_users:
              type: integer
            onboarded_merchants:
              type: integer
            conversion_rate:
              type: number
              format: float
            commissions_earned:
              type: number
              format: float
            average_response_time_minutes:
              type: number
              format: float
              nullable: true
        comparison:
          type: object
          properties:
            previous_period:
              type: string
            delta_percentage:
              type: number
              format: float
    Listing:
      type: object
      required:
        - listing_id
        - merchant_id
        - title
        - type
        - is_active
        - created_at
        - updated_at
      properties:
        listing_id:
          type: integer
          format: int64
        merchant_id:
          type: integer
          format: int64
        location_id:
          type: integer
          format: int64
          nullable: true
        title:
          type: string
        description:
          type: string
        type:
          type: string
          enum: [hotel, event, restaurant, tour, product, service]
        gallery_images:
          type: array
          items:
            type: string
            format: uri
        base_price:
          type: number
          format: float
          nullable: true
        currency:
          type: string
          nullable: true
        is_active:
          type: boolean
        operating_hours:
          type: object
          additionalProperties: true
          nullable: true
        min_booking_notice_hours:
          type: integer
          nullable: true
        max_advance_booking_days:
          type: integer
          nullable: true
        service_config:
          type: object
          additionalProperties: true
          nullable: true
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
    ListingCreateRequest:
      type: object
      required:
        - title
        - type
        - merchant_id
      properties:
        merchant_id:
          type: integer
          format: int64
        title:
          type: string
        description:
          type: string
        type:
          type: string
          enum: [hotel, event, restaurant, tour, product, service]
        base_price:
          type: number
          format: float
        currency:
          type: string
        gallery_images:
          type: array
          items:
            type: string
            format: uri
        operating_hours:
          type: object
          additionalProperties: true
        min_booking_notice_hours:
          type: integer
        max_advance_booking_days:
          type: integer
        service_config:
          type: object
          additionalProperties: true
        primary_location:
          $ref: '#/components/schemas/ListingLocationRequest'
    ListingUpdateRequest:
      type: object
      properties:
        title:
          type: string
        description:
          type: string
        base_price:
          type: number
          format: float
        currency:
          type: string
        gallery_images:
          type: array
          items:
            type: string
            format: uri
        operating_hours:
          type: object
          additionalProperties: true
        min_booking_notice_hours:
          type: integer
        max_advance_booking_days:
          type: integer
        service_config:
          type: object
          additionalProperties: true
        is_active:
          type: boolean
    ListingStatusUpdateRequest:
      type: object
      required:
        - is_active
      properties:
        is_active:
          type: boolean
        reason:
          type: string
          nullable: true
    ListingLocationRequest:
      type: object
      required:
        - location_type
        - address
      properties:
        location_type:
          type: string
          enum: [primary, branch, service_area, pop_up]
        address:
          type: string
        latitude:
          type: number
          format: float
          nullable: true
        longitude:
          type: number
          format: float
          nullable: true
        operating_hours:
          type: object
          additionalProperties: true
          nullable: true
        is_primary:
          type: boolean
        start_date:
          type: string
          format: date
          nullable: true
        end_date:
          type: string
          format: date
          nullable: true
    ListingLocation:
      type: object
      required:
        - location_id
        - listing_id
        - location_type
        - address
        - is_primary
      properties:
        location_id:
          type: integer
          format: int64
        listing_id:
          type: integer
          format: int64
        location_type:
          type: string
        address:
          type: string
        latitude:
          type: number
          format: float
          nullable: true
        longitude:
          type: number
          format: float
          nullable: true
        operating_hours:
          type: object
          additionalProperties: true
          nullable: true
        is_primary:
          type: boolean
        start_date:
          type: string
          format: date
          nullable: true
        end_date:
          type: string
          format: date
          nullable: true
    ListingAvailabilityEntry:
      type: object
      required:
        - date
        - available
      properties:
        date:
          type: string
          format: date
        available:
          type: boolean
        inventory:
          type: integer
          nullable: true
        notes:
          type: string
          nullable: true
    ListingAvailabilityBulkRequest:
      type: object
      required:
        - entries
      properties:
        entries:
          type: array
          items:
            $ref: '#/components/schemas/ListingAvailabilityEntry'
    ListingAvailabilityUpdateRequest:
      type: object
      properties:
        available:
          type: boolean
        inventory:
          type: integer
        notes:
          type: string
    HotelRoomType:
      type: object
      required:
        - room_type_id
        - listing_id
        - name
        - max_occupancy
        - total_rooms
        - base_price
        - created_at
        - updated_at
      properties:
        room_type_id:
          type: integer
          format: int64
        listing_id:
          type: integer
          format: int64
        name:
          type: string
        description:
          type: string
        max_occupancy:
          type: integer
        total_rooms:
          type: integer
        amenities:
          type: array
          items:
            type: string
        board_type:
          type: string
          enum: [RO, BB, HB, AI]
        is_refundable:
          type: boolean
        base_price:
          type: number
          format: float
        currency:
          type: string
          nullable: true
        room_config:
          type: object
          additionalProperties: true
          nullable: true
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
    HotelRoomTypeRequest:
      type: object
      required:
        - name
        - max_occupancy
        - total_rooms
        - base_price
      properties:
        name:
          type: string
        description:
          type: string
        max_occupancy:
          type: integer
        total_rooms:
          type: integer
        amenities:
          type: array
          items:
            type: string
        board_type:
          type: string
          enum: [RO, BB, HB, AI]
        is_refundable:
          type: boolean
        base_price:
          type: number
          format: float
        currency:
          type: string
        room_config:
          type: object
          additionalProperties: true
    HotelRoomAvailabilityEntry:
      type: object
      required:
        - date
        - inventory
      properties:
        date:
          type: string
          format: date
        inventory:
          type: integer
        closed_to_arrival:
          type: boolean
          nullable: true
        closed_to_departure:
          type: boolean
          nullable: true
        min_stay:
          type: integer
          nullable: true
        max_stay:
          type: integer
          nullable: true
    HotelRoomAvailabilityBulkRequest:
      type: object
      required:
        - entries
      properties:
        entries:
          type: array
          items:
            $ref: '#/components/schemas/HotelRoomAvailabilityEntry'
    HotelRoomAvailabilityUpdateRequest:
      type: object
      properties:
        inventory:
          type: integer
        closed_to_arrival:
          type: boolean
        closed_to_departure:
          type: boolean
        min_stay:
          type: integer
        max_stay:
          type: integer
    RatePlan:
      type: object
      required:
        - rate_plan_id
        - room_type_id
        - name
        - price
        - currency
        - created_at
        - updated_at
      properties:
        rate_plan_id:
          type: integer
          format: int64
        room_type_id:
          type: integer
          format: int64
        name:
          type: string
        board_type:
          type: string
          enum: [RO, BB, HB, AI]
        is_refundable:
          type: boolean
        price:
          type: number
          format: float
        currency:
          type: string
        min_stay:
          type: integer
          nullable: true
        max_stay:
          type: integer
          nullable: true
        restrictions:
          type: object
          additionalProperties: true
          nullable: true
        blackout_dates:
          type: array
          items:
            type: string
            format: date
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
    RatePlanRequest:
      type: object
      required:
        - name
        - price
        - currency
      properties:
        name:
          type: string
        board_type:
          type: string
          enum: [RO, BB, HB, AI]
        is_refundable:
          type: boolean
        price:
          type: number
          format: float
        currency:
          type: string
        min_stay:
          type: integer
        max_stay:
          type: integer
        restrictions:
          type: object
          additionalProperties: true
        blackout_dates:
          type: array
          items:
            type: string
            format: date
    Event:
      type: object
      required:
        - event_id
        - listing_id
        - event_name
        - event_date
        - total_tickets
        - available_tickets
        - created_at
        - updated_at
      properties:
        event_id:
          type: integer
          format: int64
        listing_id:
          type: integer
          format: int64
        event_name:
          type: string
        event_date:
          type: string
          format: date-time
        end_date:
          type: string
          format: date-time
          nullable: true
        venue_name:
          type: string
        total_tickets:
          type: integer
        available_tickets:
          type: integer
        ticket_tiers:
          type: array
          items:
            $ref: '#/components/schemas/TicketTier'
        is_recurring:
          type: boolean
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
    EventRequest:
      type: object
      required:
        - event_name
        - event_date
        - total_tickets
      properties:
        event_name:
          type: string
        event_date:
          type: string
          format: date-time
        end_date:
          type: string
          format: date-time
        venue_name:
          type: string
        total_tickets:
          type: integer
        ticket_tiers:
          type: array
          items:
            $ref: '#/components/schemas/TicketTierRequest'
        is_recurring:
          type: boolean
    TicketTier:
      type: object
      required:
        - tier_id
        - event_id
        - name
        - price
        - currency
        - remaining
      properties:
        tier_id:
          type: integer
          format: int64
        event_id:
          type: integer
          format: int64
        name:
          type: string
        price:
          type: number
          format: float
        currency:
          type: string
        remaining:
          type: integer
        benefits:
          type: array
          items:
            type: string
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
    TicketTierRequest:
      type: object
      required:
        - name
        - price
        - currency
        - remaining
      properties:
        name:
          type: string
        description:
          type: string
        price:
          type: number
          format: float
        currency:
          type: string
        remaining:
          type: integer
        benefits:
          type: array
          items:
            type: string
    RestaurantTable:
      type: object
      required:
        - table_id
        - listing_id
        - table_type
        - capacity
        - table_count
        - created_at
        - updated_at
      properties:
        table_id:
          type: integer
          format: int64
        listing_id:
          type: integer
          format: int64
        table_type:
          type: string
          enum: [indoor, outdoor, private]
        capacity:
          type: integer
        table_count:
          type: integer
        min_booking_duration_minutes:
          type: integer
          nullable: true
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
    RestaurantTableRequest:
      type: object
      required:
        - table_type
        - capacity
        - table_count
      properties:
        table_type:
          type: string
          enum: [indoor, outdoor, private]
        capacity:
          type: integer
        table_count:
          type: integer
        min_booking_duration_minutes:
          type: integer
    TableAvailabilityCheckRequest:
      type: object
      required:
        - start_time
        - end_time
        - guest_count
      properties:
        start_time:
          type: string
          format: date-time
        end_time:
          type: string
          format: date-time
        guest_count:
          type: integer
        table_type:
          type: string
          nullable: true
    TableAvailabilityCheckResult:
      type: object
      required:
        - available
      properties:
        available:
          type: boolean
        suggested_tables:
          type: array
          items:
            $ref: '#/components/schemas/RestaurantTable'
        message:
          type: string
          nullable: true
    Product:
      type: object
      required:
        - product_id
        - listing_id
        - product_name
        - status
        - price
        - currency
        - created_at
        - updated_at
      properties:
        product_id:
          type: integer
          format: int64
        listing_id:
          type: integer
          format: int64
        product_name:
          type: string
        description:
          type: string
        stock_quantity:
          type: integer
        variants:
          type: array
          items:
            type: object
            additionalProperties: true
        track_inventory:
          type: boolean
        price:
          type: number
          format: float
        currency:
          type: string
        status:
          type: string
          enum: [active, inactive, out_of_stock]
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
    ProductRequest:
      type: object
      required:
        - product_name
        - price
        - currency
      properties:
        product_name:
          type: string
        description:
          type: string
        stock_quantity:
          type: integer
        variants:
          type: array
          items:
            type: object
            additionalProperties: true
        track_inventory:
          type: boolean
        price:
          type: number
          format: float
        currency:
          type: string
        status:
          type: string
          enum: [active, inactive, out_of_stock]
    ProductInventoryPatchRequest:
      type: object
      required:
        - stock_quantity
      properties:
        stock_quantity:
          type: integer
        track_inventory:
          type: boolean
          nullable: true
        status:
          type: string
          enum: [active, inactive, out_of_stock]
          nullable: true
    ServiceOffering:
      type: object
      required:
        - service_id
        - listing_id
        - service_name
        - duration_minutes
        - price
        - created_at
        - updated_at
      properties:
        service_id:
          type: integer
          format: int64
        listing_id:
          type: integer
          format: int64
        service_name:
          type: string
        description:
          type: string
        duration_minutes:
          type: integer
        max_concurrent_customers:
          type: integer
          nullable: true
        is_available:
          type: boolean
        price:
          type: number
          format: float
        currency:
          type: string
          nullable: true
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
    ServiceOfferingRequest:
      type: object
      required:
        - service_name
        - duration_minutes
        - price
      properties:
        service_name:
          type: string
        description:
          type: string
        duration_minutes:
          type: integer
        max_concurrent_customers:
          type: integer
        is_available:
          type: boolean
        price:
          type: number
          format: float
        currency:
          type: string
    ServiceAvailabilityRequest:
      type: object
      required:
        - slots
      properties:
        slots:
          type: array
          items:
            type: object
            required:
              - date
              - start_time
              - end_time
            properties:
              date:
                type: string
                format: date
              start_time:
                type: string
              end_time:
                type: string
              capacity:
                type: integer
                nullable: true
    ServiceAvailabilityUpdateRequest:
      type: object
      properties:
        start_time:
          type: string
        end_time:
          type: string
        capacity:
          type: integer
        is_available:
          type: boolean
    TourPackage:
      type: object
      required:
        - tour_id
        - listing_id
        - tour_name
        - price
        - currency
        - capacity
        - created_at
        - updated_at
      properties:
        tour_id:
          type: integer
          format: int64
        listing_id:
          type: integer
          format: int64
        tour_name:
          type: string
        description:
          type: string
        images:
          type: array
          items:
            type: string
            format: uri
        schedule:
          type: array
          items:
            $ref: '#/components/schemas/TourScheduleEntry'
        add_ons:
          type: array
          items:
            $ref: '#/components/schemas/TourAddon'
        price:
          type: number
          format: float
        currency:
          type: string
        capacity:
          type: integer
        available_slots:
          type: integer
        status:
          type: string
          nullable: true
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
    TourPackageRequest:
      type: object
      required:
        - tour_name
        - price
        - currency
        - capacity
      properties:
        tour_name:
          type: string
        description:
          type: string
        images:
          type: array
          items:
            type: string
            format: uri
        price:
          type: number
          format: float
        currency:
          type: string
        capacity:
          type: integer
        available_slots:
          type: integer
        status:
          type: string
        schedule:
          type: array
          items:
            $ref: '#/components/schemas/TourScheduleRequest'
        add_ons:
          type: array
          items:
            $ref: '#/components/schemas/TourAddonRequest'
    TourScheduleEntry:
      type: object
      required:
        - schedule_id
        - tour_id
        - start_time
        - end_time
      properties:
        schedule_id:
          type: integer
          format: int64
        tour_id:
          type: integer
          format: int64
        start_time:
          type: string
          format: date-time
        end_time:
          type: string
          format: date-time
        capacity:
          type: integer
          nullable: true
        meeting_point:
          type: string
          nullable: true
    TourScheduleRequest:
      type: object
      required:
        - start_time
        - end_time
      properties:
        start_time:
          type: string
          format: date-time
        end_time:
          type: string
          format: date-time
        capacity:
          type: integer
        meeting_point:
          type: string
    TourAddon:
      type: object
      required:
        - addon_id
        - tour_id
        - name
        - price
        - currency
      properties:
        addon_id:
          type: integer
          format: int64
        tour_id:
          type: integer
          format: int64
        name:
          type: string
        description:
          type: string
        price:
          type: number
          format: float
        currency:
          type: string
        max_quantity:
          type: integer
          nullable: true
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
    TourAddonRequest:
      type: object
      required:
        - name
        - price
        - currency
      properties:
        name:
          type: string
        description:
          type: string
        price:
          type: number
          format: float
        currency:
          type: string
        max_quantity:
          type: integer
    BookingType:
      type: string
      enum:
        - hotel_stay
        - event_ticket
        - restaurant
        - tour
        - product
        - service
    BookingStatus:
      type: string
      enum:
        - pending
        - confirmed
        - checked_in
        - completed
        - cancelled
        - no_show
    Booking:
      type: object
      required:
        - booking_id
        - user_id
        - listing_id
        - booking_type
        - status
        - start_time
        - end_time
        - quantity
        - guest_count
        - base_amount
        - tax_amount
        - service_fee
        - total_amount
        - currency
        - created_at
        - updated_at
      properties:
        booking_id:
          type: integer
          format: int64
        user_id:
          type: integer
          format: int64
        listing_id:
          type: integer
          format: int64
        resource_id:
          type: integer
          format: int64
          nullable: true
        booking_type:
          $ref: '#/components/schemas/BookingType'
        status:
          $ref: '#/components/schemas/BookingStatus'
        start_time:
          type: string
          format: date-time
        end_time:
          type: string
          format: date-time
        quantity:
          type: integer
        guest_count:
          type: integer
        base_amount:
          type: number
          format: float
        tax_amount:
          type: number
          format: float
        service_fee:
          type: number
          format: float
        total_amount:
          type: number
          format: float
        currency:
          type: string
        booking_details:
          type: object
          additionalProperties: true
          nullable: true
        special_requests:
          type: string
          nullable: true
        cancellation_reason:
          type: string
          nullable: true
        confirmation_code:
          type: string
          nullable: true
        created_at:
          type: string
          format: date-time
        confirmed_at:
          type: string
          format: date-time
          nullable: true
        cancelled_at:
          type: string
          format: date-time
          nullable: true
        updated_at:
          type: string
          format: date-time
    BookingCreateRequest:
      type: object
      required:
        - listing_id
        - booking_type
        - start_time
        - end_time
        - quantity
        - guest_count
      properties:
        listing_id:
          type: integer
          format: int64
        resource_id:
          type: integer
          format: int64
          nullable: true
        booking_type:
          $ref: '#/components/schemas/BookingType'
        start_time:
          type: string
          format: date-time
        end_time:
          type: string
          format: date-time
        quantity:
          type: integer
        guest_count:
          type: integer
        special_requests:
          type: string
        booking_details:
          type: object
          additionalProperties: true
    BookingUpdateRequest:
      type: object
      properties:
        start_time:
          type: string
          format: date-time
        end_time:
          type: string
          format: date-time
        quantity:
          type: integer
        guest_count:
          type: integer
        special_requests:
          type: string
        booking_details:
          type: object
          additionalProperties: true
    BookingStatusUpdateRequest:
      type: object
      required:
        - status
      properties:
        status:
          $ref: '#/components/schemas/BookingStatus'
        cancellation_reason:
          type: string
          nullable: true
    BookingAvailabilityCheckRequest:
      type: object
      required:
        - listing_id
        - booking_type
        - start_time
        - end_time
      properties:
        listing_id:
          type: integer
          format: int64
        resource_id:
          type: integer
          format: int64
          nullable: true
        booking_type:
          $ref: '#/components/schemas/BookingType'
        start_time:
          type: string
          format: date-time
        end_time:
          type: string
          format: date-time
        quantity:
          type: integer
        guest_count:
          type: integer
          nullable: true
    BookingAvailabilityCheckResult:
      type: object
      required:
        - available
        - listing_id
        - booking_type
        - start_time
        - end_time
      properties:
        available:
          type: boolean
        listing_id:
          type: integer
          format: int64
        resource_id:
          type: integer
          format: int64
          nullable: true
        booking_type:
          $ref: '#/components/schemas/BookingType'
        start_time:
          type: string
          format: date-time
        end_time:
          type: string
          format: date-time
        available_quantity:
          type: integer
          nullable: true
        price_per_unit:
          type: number
          format: float
          nullable: true
        currency:
          type: string
          nullable: true
        total_price:
          type: number
          format: float
          nullable: true
        message:
          type: string
          nullable: true
    BookingAvailabilityResult:
      type: object
      required:
        - listing_id
        - booking_type
        - available
      properties:
        listing_id:
          type: integer
          format: int64
        resource_id:
          type: integer
          format: int64
          nullable: true
        booking_type:
          $ref: '#/components/schemas/BookingType'
        available:
          type: boolean
        available_quantity:
          type: integer
          nullable: true
        price_per_unit:
          type: number
          format: float
          nullable: true
        currency:
          type: string
          nullable: true
    BookingCalendar:
      type: object
      required:
        - listing_id
        - calendar_entries
      properties:
        listing_id:
          type: integer
          format: int64
        booking_type:
          $ref: '#/components/schemas/BookingType'
          nullable: true
        calendar_entries:
          type: array
          items:
            type: object
            required:
              - date
              - available
            properties:
              date:
                type: string
                format: date
              available:
                type: boolean
              available_quantity:
                type: integer
                nullable: true
              price:
                type: number
                format: float
                nullable: true
    BookingParticipant:
      type: object
      required:
        - participant_id
        - booking_id
        - full_name
        - is_primary_guest
        - checked_in
      properties:
        participant_id:
          type: integer
          format: int64
        booking_id:
          type: integer
          format: int64
        full_name:
          type: string
        email:
          type: string
          format: email
          nullable: true
        phone_number:
          type: string
          nullable: true
        identification_number:
          type: string
          nullable: true
        dietary_restrictions:
          type: string
          nullable: true
        is_primary_guest:
          type: boolean
        checked_in:
          type: boolean
        checked_in_at:
          type: string
          format: date-time
          nullable: true
    BookingParticipantRequest:
      type: object
      required:
        - full_name
      properties:
        full_name:
          type: string
        email:
          type: string
          format: email
        phone_number:
          type: string
        identification_number:
          type: string
        dietary_restrictions:
          type: string
        is_primary_guest:
          type: boolean
    BookingAddon:
      type: object
      required:
        - addon_id
        - booking_id
        - addon_name
        - addon_type
        - price
        - quantity
      properties:
        addon_id:
          type: integer
          format: int64
        booking_id:
          type: integer
          format: int64
        addon_name:
          type: string
        addon_type:
          type: string
        price:
          type: number
          format: float
        quantity:
          type: integer
        addon_details:
          type: object
          additionalProperties: true
          nullable: true
    BookingAddonRequest:
      type: object
      required:
        - addon_name
        - addon_type
        - price
        - quantity
      properties:
        addon_name:
          type: string
        addon_type:
          type: string
        price:
          type: number
          format: float
        quantity:
          type: integer
        addon_details:
          type: object
          additionalProperties: true
    OrderStatus:
      type: string
      enum:
        - pending
        - confirmed
        - shipped
        - delivered
        - cancelled
    Order:
      type: object
      required:
        - order_id
        - user_id
        - listing_id
        - quantity
        - status
        - total_amount
        - currency
        - created_at
        - updated_at
      properties:
        order_id:
          type: integer
          format: int64
        user_id:
          type: integer
          format: int64
        listing_id:
          type: integer
          format: int64
        product_id:
          type: integer
          format: int64
          nullable: true
        quantity:
          type: integer
        status:
          $ref: '#/components/schemas/OrderStatus'
        total_amount:
          type: number
          format: float
        currency:
          type: string
        payment_id:
          type: integer
          format: int64
          nullable: true
        shipping_address:
          type: object
          additionalProperties: true
          nullable: true
        tracking_number:
          type: string
          nullable: true
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
    OrderCreateRequest:
      type: object
      required:
        - listing_id
        - quantity
      properties:
        listing_id:
          type: integer
          format: int64
        product_id:
          type: integer
          format: int64
          nullable: true
        quantity:
          type: integer
        shipping_address:
          type: object
          additionalProperties: true
    OrderUpdateRequest:
      type: object
      properties:
        quantity:
          type: integer
        shipping_address:
          type: object
          additionalProperties: true
        tracking_number:
          type: string
    OrderStatusUpdateRequest:
      type: object
      required:
        - status
      properties:
        status:
          $ref: '#/components/schemas/OrderStatus'
        tracking_number:
          type: string
          nullable: true
    MerchantCategory:
      type: string
      enum:
        - hotel
        - restaurant
        - bar
        - coffee_shop
        - event_venue
        - tour_operator
        - shop
        - service
    MerchantStatus:
      type: string
      enum:
        - pending
        - active
        - suspended
    MerchantOnboardingStatusValue:
      type: string
      enum:
        - pending
        - in_review
        - approved
        - rejected
    Merchant:
      type: object
      required:
        - merchant_id
        - user_id
        - business_name
        - category
        - status
        - onboarding_status
        - created_at
        - updated_at
      properties:
        merchant_id:
          type: integer
          format: int64
        user_id:
          type: integer
          format: int64
        business_name:
          type: string
        description:
          type: string
        category:
          $ref: '#/components/schemas/MerchantCategory'
        contact_phone:
          type: string
        contact_email:
          type: string
          format: email
        business_license:
          type: string
        is_verified:
          type: boolean
        status:
          $ref: '#/components/schemas/MerchantStatus'
        onboarding_status:
          $ref: '#/components/schemas/MerchantOnboardingStatusValue'
        agent_id:
          type: integer
          format: int64
          nullable: true
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
    MerchantApplicationRequest:
      type: object
      required:
        - business_name
        - category
        - contact_phone
        - contact_email
        - description
      properties:
        business_name:
          type: string
          maxLength: 255
        description:
          type: string
        category:
          $ref: '#/components/schemas/MerchantCategory'
        contact_phone:
          type: string
        contact_email:
          type: string
          format: email
        business_license:
          type: string
        agent_code:
          type: string
          description: Optional referral agent code
        location:
          $ref: '#/components/schemas/MerchantLocationRequest'
    MerchantOnboardingStatus:
      type: object
      required:
        - merchant_id
        - onboarding_status
        - status
        - required_documents
        - submitted_documents
        - missing_documents
      properties:
        merchant_id:
          type: integer
          format: int64
        onboarding_status:
          $ref: '#/components/schemas/MerchantOnboardingStatusValue'
        status:
          $ref: '#/components/schemas/MerchantStatus'
        required_documents:
          type: array
          items:
            type: string
        submitted_documents:
          type: array
          items:
            type: string
        missing_documents:
          type: array
          items:
            type: string
        last_reviewed_at:
          type: string
          format: date-time
          nullable: true
    MerchantOnboardingUpdateRequest:
      type: object
      required:
        - onboarding_status
        - status
      properties:
        onboarding_status:
          $ref: '#/components/schemas/MerchantOnboardingStatusValue'
        status:
          $ref: '#/components/schemas/MerchantStatus'
        review_notes:
          type: string
        missing_documents:
          type: array
          items:
            type: string
    MerchantDocumentUploadRequest:
      type: object
      required:
        - document_type
        - file
      properties:
        document_type:
          type: string
          description: Document type identifier (e.g., business_license)
        file:
          type: string
          format: binary
    MerchantDocument:
      type: object
      required:
        - document_id
        - merchant_id
        - document_type
        - file_name
        - uploaded_at
      properties:
        document_id:
          type: integer
          format: int64
        merchant_id:
          type: integer
          format: int64
        document_type:
          type: string
        file_name:
          type: string
        uploaded_at:
          type: string
          format: date-time
    MerchantUpdateRequest:
      type: object
      properties:
        business_name:
          type: string
        description:
          type: string
        contact_phone:
          type: string
        contact_email:
          type: string
          format: email
        business_license:
          type: string
        default_city:
          type: string
        social_links:
          type: array
          items:
            type: string
    MerchantLocationRequest:
      type: object
      required:
        - address_line_1
        - city
        - district
      properties:
        address_line_1:
          type: string
        address_line_2:
          type: string
        city:
          type: string
        district:
          type: string
        neighborhood:
          type: string
        latitude:
          type: number
          format: float
        longitude:
          type: number
          format: float
        timezone:
          type: string
    MerchantLocation:
      type: object
      required:
        - location_id
        - merchant_id
        - address_line_1
        - city
        - district
      properties:
        location_id:
          type: integer
          format: int64
        merchant_id:
          type: integer
          format: int64
        address_line_1:
          type: string
        address_line_2:
          type: string
        city:
          type: string
        district:
          type: string
        neighborhood:
          type: string
        latitude:
          type: number
          format: float
        longitude:
          type: number
          format: float
        timezone:
          type: string
    MerchantSubscriptionPlan:
      type: string
      enum:
        - basic
        - premium
        - enterprise
    MerchantSubscriptionStatus:
      type: string
      enum:
        - active
        - expired
        - cancelled
    MerchantSubscriptionRequest:
      type: object
      required:
        - plan
        - start_date
      properties:
        plan:
          $ref: '#/components/schemas/MerchantSubscriptionPlan'
        start_date:
          type: string
          format: date
        end_date:
          type: string
          format: date
        payment_id:
          type: integer
          format: int64
        status:
          $ref: '#/components/schemas/MerchantSubscriptionStatus'
    MerchantSubscription:
      type: object
      required:
        - subscription_id
        - merchant_id
        - plan
        - start_date
        - status
      properties:
        subscription_id:
          type: integer
          format: int64
        merchant_id:
          type: integer
          format: int64
        plan:
          $ref: '#/components/schemas/MerchantSubscriptionPlan'
        start_date:
          type: string
          format: date
        end_date:
          type: string
          format: date
          nullable: true
        status:
          $ref: '#/components/schemas/MerchantSubscriptionStatus'
        payment_id:
          type: integer
          format: int64
          nullable: true
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
    MerchantPromotionType:
      type: string
      enum:
        - flash_sale
        - discount
        - campaign
    MerchantPromotionStatus:
      type: string
      enum:
        - active
        - scheduled
        - expired
    MerchantPromotionRequest:
      type: object
      required:
        - title
        - promotion_type
        - start_date
        - end_date
      properties:
        title:
          type: string
        description:
          type: string
        promotion_type:
          $ref: '#/components/schemas/MerchantPromotionType'
        start_date:
          type: string
          format: date
        end_date:
          type: string
          format: date
        discount_percent:
          type: number
          format: float
        discount_amount:
          type: number
          format: float
        status:
          $ref: '#/components/schemas/MerchantPromotionStatus'
    MerchantPromotion:
      type: object
      required:
        - promotion_id
        - merchant_id
        - title
        - promotion_type
        - start_date
        - end_date
        - status
      properties:
        promotion_id:
          type: integer
          format: int64
        merchant_id:
          type: integer
          format: int64
        title:
          type: string
        description:
          type: string
        promotion_type:
          $ref: '#/components/schemas/MerchantPromotionType'
        start_date:
          type: string
          format: date
        end_date:
          type: string
          format: date
        discount_percent:
          type: number
          format: float
        discount_amount:
          type: number
          format: float
        status:
          $ref: '#/components/schemas/MerchantPromotionStatus'
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time

