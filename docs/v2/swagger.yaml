openapi: 3.0.3
info:
  title: Zoea V2 API
  version: "2.0.0"
  description: |
    Zoea V2 Merchant Management module OpenAPI specification.
    All success and error responses adhere to standardized envelope structures.
servers:
  - url: https://api.zoea.local
    description: Zoea V2 primary API server
tags:
  - name: Authentication
    description: Account registration, login, and credential management.
  - name: Users
    description: User profile and account management.
  - name: Saved Locations
    description: Manage user saved locations.
  - name: User Favorites
    description: Manage favorite listings for a user.
  - name: Search History
    description: Manage user search history records.
  - name: Agent Accounts
    description: Agent registration and profile management.
  - name: Agent Onboarding
    description: Tools for agents onboarding users and merchants.
  - name: Agent Commissions
    description: Commission tracking and payouts for agents.
  - name: Agent Leaderboard
    description: Agent ranking and leaderboard insights.
  - name: Agent Analytics
    description: Agent performance analytics and reporting.
  - name: Listings
    description: Manage core listings catalog.
  - name: Listing Locations
    description: Manage locations attached to listings.
  - name: Hotel Room Types
    description: Manage hotel room types and related configurations.
  - name: Rate Plans
    description: Manage hotel rate plans and restrictions.
  - name: Listing Availability
    description: Manage availability calendars for listings and resources.
  - name: Events
    description: Manage events and associated ticket tiers.
  - name: Restaurant Tables
    description: Manage restaurant table configurations and availability checks.
  - name: Products
    description: Manage product inventory for listings.
  - name: Services
    description: Manage service offerings and availability.
  - name: Tours
    description: Manage tour packages, schedules, and add-ons.
  - name: Merchant Onboarding
    description: Onboarding workflows for new merchants.
  - name: Merchant Profile
    description: Merchant profile management endpoints.
  - name: Merchant Locations
    description: CRUD operations for merchant locations.
  - name: Merchant Subscriptions
    description: Manage merchant subscription plans.
  - name: Merchant Promotions
    description: Manage merchant promotional campaigns.
paths:
  /api/v1/auth/register:
    post:
      tags:
        - Authentication
      summary: Register a new user account
      operationId: registerUserAccount
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UserRegistrationRequest'
      responses:
        '201':
          description: User registered successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/AuthResponse'
              examples:
                userRegistered:
                  value:
                    status: success
                    message: User registered successfully
                    data:
                      user:
                        user_id: 2001
                        first_name: Alice
                        last_name: Umutesi
                        email: alice@example.com
                        phone_number: '+250788000111'
                        avatar_url: https://cdn.zoea.rw/avatars/2001.png
                        default_city: Kigali
                        is_verified: false
                        created_at: 2025-11-07T08:00:00Z
                        updated_at: 2025-11-07T08:00:00Z
                      tokens:
                        access_token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
                        refresh_token: 3b2f6d4b-9c5a-4ac5-9f5b-87f6ecddc6bb
                        expires_in: 3600
        '400':
          $ref: '#/components/responses/BadRequestError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/auth/login:
    post:
      tags:
        - Authentication
      summary: Authenticate an existing user
      operationId: loginUser
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UserLoginRequest'
      responses:
        '200':
          description: User authenticated successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/AuthResponse'
              examples:
                userLogin:
                  value:
                    status: success
                    message: Login successful
                    data:
                      user:
                        user_id: 2001
                        first_name: Alice
                        last_name: Umutesi
                        email: alice@example.com
                        phone_number: '+250788000111'
                        avatar_url: https://cdn.zoea.rw/avatars/2001.png
                        default_city: Kigali
                        is_verified: true
                        created_at: 2025-01-10T09:00:00Z
                        updated_at: 2025-11-07T07:32:00Z
                      tokens:
                        access_token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
                        refresh_token: 13a2cbf5-25ba-43f5-9e0b-5aef2c6782e4
                        expires_in: 3600
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/auth/logout:
    post:
      tags:
        - Authentication
      summary: Logout the current session
      operationId: logoutUser
      security:
        - BearerAuth: []
      responses:
        '200':
          description: User logged out successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Acknowledgement'
              examples:
                userLogout:
                  value:
                    status: success
                    message: Logout successful
                    data:
                      acknowledged: true
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/auth/refresh-token:
    post:
      tags:
        - Authentication
      summary: Refresh access and refresh tokens
      operationId: refreshAuthToken
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RefreshTokenRequest'
      responses:
        '200':
          description: Tokens refreshed successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/AuthTokens'
              examples:
                tokenRefresh:
                  value:
                    status: success
                    message: Tokens refreshed
                    data:
                      access_token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
                      refresh_token: 8d6e2df0-8895-4b54-b1f1-bd8d2b7aa122
                      expires_in: 3600
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/auth/forgot-password:
    post:
      tags:
        - Authentication
      summary: Initiate password reset flow
      operationId: initiatePasswordReset
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ForgotPasswordRequest'
      responses:
        '200':
          description: Password reset email dispatched
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/PasswordResetDispatch'
              examples:
                passwordResetInit:
                  value:
                    status: success
                    message: Password reset instructions sent
                    data:
                      email: alice@example.com
                      reset_token_sent: true
                      expires_in: 900
        '400':
          $ref: '#/components/responses/BadRequestError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/auth/reset-password:
    post:
      tags:
        - Authentication
      summary: Complete password reset
      operationId: resetPassword
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ResetPasswordRequest'
      responses:
        '200':
          description: Password reset successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/PasswordResetResult'
              examples:
                passwordResetComplete:
                  value:
                    status: success
                    message: Password reset completed
                    data:
                      password_reset: true
        '400':
          $ref: '#/components/responses/BadRequestError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/auth/verify-email:
    post:
      tags:
        - Authentication
      summary: Verify a user email address
      operationId: verifyEmail
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/VerifyEmailRequest'
      responses:
        '200':
          description: Email verified successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/EmailVerificationResult'
              examples:
                emailVerified:
                  value:
                    status: success
                    message: Email verified successfully
                    data:
                      verified: true
        '400':
          $ref: '#/components/responses/BadRequestError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/users/me:
    get:
      tags:
        - Users
      summary: Retrieve the authenticated user profile
      operationId: getAuthenticatedUser
      security:
        - BearerAuth: []
      responses:
        '200':
          description: Authenticated user profile retrieved
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/User'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'
    put:
      tags:
        - Users
      summary: Replace the authenticated user profile
      operationId: updateAuthenticatedUser
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UserProfileUpdateRequest'
      responses:
        '200':
          description: Authenticated user profile updated
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/User'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'
    patch:
      tags:
        - Users
      summary: Partially update the authenticated user profile
      operationId: patchAuthenticatedUser
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UserProfilePatchRequest'
      responses:
        '200':
          description: Authenticated user profile updated
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/User'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'
    delete:
      tags:
        - Users
      summary: Deactivate the authenticated user account
      operationId: deleteAuthenticatedUser
      security:
        - BearerAuth: []
      responses:
        '200':
          description: Authenticated user account deactivated
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/AccountDeletionResult'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/users/{user_id}:
    get:
      tags:
        - Users
      summary: Retrieve a user profile by identifier
      operationId: getUserById
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/UserIdParam'
      responses:
        '200':
          description: User profile retrieved
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/User'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/users/{user_id}/avatar:
    put:
      tags:
        - Users
      summary: Update a user avatar
      operationId: updateUserAvatar
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/UserIdParam'
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/UserAvatarUploadRequest'
      responses:
        '200':
          description: User avatar updated
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/User'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/users/me/saved-locations:
    get:
      tags:
        - Saved Locations
      summary: List saved locations for the authenticated user
      operationId: listSavedLocations
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/LimitParam'
        - $ref: '#/components/parameters/SortParam'
        - $ref: '#/components/parameters/SearchParam'
      responses:
        '200':
          description: Saved locations retrieved
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/PaginatedSuccessResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/SavedLocation'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'
    post:
      tags:
        - Saved Locations
      summary: Create a saved location for the authenticated user
      operationId: createSavedLocation
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SavedLocationRequest'
      responses:
        '201':
          description: Saved location created
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/SavedLocation'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/users/me/saved-locations/{saved_location_id}:
    put:
      tags:
        - Saved Locations
      summary: Update a saved location
      operationId: updateSavedLocation
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/SavedLocationIdParam'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SavedLocationRequest'
      responses:
        '200':
          description: Saved location updated
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/SavedLocation'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
    delete:
      tags:
        - Saved Locations
      summary: Delete a saved location
      operationId: deleteSavedLocation
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/SavedLocationIdParam'
      responses:
        '200':
          description: Saved location deleted
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Acknowledgement'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/users/me/favorites:
    get:
      tags:
        - User Favorites
      summary: List favorite listings for the authenticated user
      operationId: listUserFavorites
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/LimitParam'
        - $ref: '#/components/parameters/SortParam'
        - $ref: '#/components/parameters/SearchParam'
      responses:
        '200':
          description: Favorite listings retrieved
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/PaginatedSuccessResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/UserFavorite'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'
    post:
      tags:
        - User Favorites
      summary: Add a listing to user favorites
      operationId: createUserFavorite
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UserFavoriteRequest'
      responses:
        '201':
          description: Favorite listing created
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/UserFavorite'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/users/me/favorites/{listing_id}:
    delete:
      tags:
        - User Favorites
      summary: Remove a listing from user favorites
      operationId: deleteUserFavorite
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/ListingIdParam'
      responses:
        '200':
          description: Favorite listing removed
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Acknowledgement'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/users/me/search-history:
    get:
      tags:
        - Search History
      summary: List search history for the authenticated user
      operationId: listUserSearchHistory
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/LimitParam'
        - $ref: '#/components/parameters/SortParam'
        - $ref: '#/components/parameters/SearchParam'
      responses:
        '200':
          description: Search history entries retrieved
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/PaginatedSuccessResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/UserSearchHistoryEntry'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'
    delete:
      tags:
        - Search History
      summary: Clear all search history for the authenticated user
      operationId: deleteUserSearchHistory
      security:
        - BearerAuth: []
      responses:
        '200':
          description: Search history cleared
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/SearchHistoryClearResult'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/users/me/search-history/{search_id}:
    delete:
      tags:
        - Search History
      summary: Delete a single search history entry
      operationId: deleteUserSearchHistoryEntry
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/SearchIdParam'
      responses:
        '200':
          description: Search history entry deleted
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/SearchHistoryDeleteResult'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/agents/apply:
    post:
      tags:
        - Agent Accounts
      summary: Apply to become an agent
      operationId: applyForAgent
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AgentApplicationRequest'
      responses:
        '201':
          description: Agent application submitted successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Agent'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/agents/me:
    get:
      tags:
        - Agent Accounts
      summary: Retrieve the authenticated agent profile
      operationId: getAuthenticatedAgent
      security:
        - BearerAuth: []
      responses:
        '200':
          description: Authenticated agent profile retrieved
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Agent'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'
    put:
      tags:
        - Agent Accounts
      summary: Update the authenticated agent profile
      operationId: updateAuthenticatedAgent
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AgentProfileUpdateRequest'
      responses:
        '200':
          description: Authenticated agent profile updated
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Agent'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/agents/{agent_id}:
    get:
      tags:
        - Agent Accounts
      summary: Retrieve an agent profile by identifier
      operationId: getAgentById
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/AgentIdParam'
      responses:
        '200':
          description: Agent profile retrieved
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Agent'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/agents/onboard-user:
    post:
      tags:
        - Agent Onboarding
      summary: Onboard a new user via agent
      operationId: agentOnboardUser
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AgentOnboardUserRequest'
      responses:
        '201':
          description: User onboarded successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/AgentOnboardingResult'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/agents/onboard-merchant:
    post:
      tags:
        - Agent Onboarding
      summary: Onboard a new merchant via agent
      operationId: agentOnboardMerchant
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AgentOnboardMerchantRequest'
      responses:
        '201':
          description: Merchant onboarded successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/AgentOnboardingResult'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/agents/onboarding-stats:
    get:
      tags:
        - Agent Onboarding
      summary: Retrieve onboarding statistics for the authenticated agent
      operationId: getAgentOnboardingStats
      security:
        - BearerAuth: []
      responses:
        '200':
          description: Agent onboarding statistics retrieved
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/AgentOnboardingStats'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/agents/me/commissions:
    get:
      tags:
        - Agent Commissions
      summary: List commissions earned by the authenticated agent
      operationId: listAgentCommissions
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/LimitParam'
        - $ref: '#/components/parameters/SortParam'
        - in: query
          name: status
          schema:
            $ref: '#/components/schemas/CommissionStatus'
          description: Filter by commission payment status
        - in: query
          name: commission_type
          schema:
            $ref: '#/components/schemas/CommissionType'
          description: Filter by commission type
      responses:
        '200':
          description: Agent commissions retrieved
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/PaginatedSuccessResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/Commission'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/agents/me/commissions/summary:
    get:
      tags:
        - Agent Commissions
      summary: Retrieve commissions summary for the authenticated agent
      operationId: getAgentCommissionSummary
      security:
        - BearerAuth: []
      responses:
        '200':
          description: Agent commission summary retrieved
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/CommissionSummary'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/agents/me/commissions/{commission_id}/payout:
    post:
      tags:
        - Agent Commissions
      summary: Request payout for a commission
      operationId: payoutAgentCommission
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/CommissionIdParam'
      responses:
        '200':
          description: Commission payout initiated
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/CommissionPayoutResult'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/agents/leaderboard:
    get:
      tags:
        - Agent Leaderboard
      summary: Retrieve leaderboard standings for agents
      operationId: getAgentLeaderboard
      parameters:
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/LimitParam'
        - $ref: '#/components/parameters/SortParam'
        - in: query
          name: period
          schema:
            $ref: '#/components/schemas/LeaderboardPeriod'
          description: Filter leaderboard by period
        - in: query
          name: tier
          schema:
            $ref: '#/components/schemas/AgentTier'
          description: Filter leaderboard by agent tier
      responses:
        '200':
          description: Agent leaderboard retrieved
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/PaginatedSuccessResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/AgentLeaderboardEntry'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/agents/leaderboard/{period}:
    get:
      tags:
        - Agent Leaderboard
      summary: Retrieve leaderboard standings for a specific period
      operationId: getAgentLeaderboardByPeriod
      parameters:
        - $ref: '#/components/parameters/LeaderboardPeriodParam'
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/LimitParam'
      responses:
        '200':
          description: Agent leaderboard retrieved for period
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/PaginatedSuccessResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/AgentLeaderboardEntry'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/agents/me/leaderboard-position:
    get:
      tags:
        - Agent Leaderboard
      summary: Retrieve the authenticated agent leaderboard position
      operationId: getAgentLeaderboardPosition
      security:
        - BearerAuth: []
      responses:
        '200':
          description: Agent leaderboard position retrieved
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/AgentLeaderboardPosition'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/agents/me/analytics:
    get:
      tags:
        - Agent Analytics
      summary: Retrieve analytics for the authenticated agent
      operationId: getAgentAnalytics
      security:
        - BearerAuth: []
      parameters:
        - in: query
          name: from
          schema:
            type: string
            format: date
          description: Start date filter
        - in: query
          name: to
          schema:
            type: string
            format: date
          description: End date filter
      responses:
        '200':
          description: Agent analytics retrieved
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/AgentAnalytics'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/agents/me/performance:
    get:
      tags:
        - Agent Analytics
      summary: Retrieve performance metrics for the authenticated agent
      operationId: getAgentPerformance
      security:
        - BearerAuth: []
      parameters:
        - in: query
          name: period
          schema:
            $ref: '#/components/schemas/LeaderboardPeriod'
          description: Period over which to aggregate performance
      responses:
        '200':
          description: Agent performance metrics retrieved
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/AgentPerformance'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/merchants/apply:
    post:
      tags:
        - Merchant Onboarding
      summary: Submit a merchant application
      operationId: submitMerchantApplication
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MerchantApplicationRequest'
      responses:
        '201':
          description: Merchant application submitted successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Merchant'
              examples:
                merchantApplication:
                  value:
                    status: success
                    message: Merchant application submitted
                    data:
                      merchant_id: 101
                      user_id: 55
                      business_name: Sunrise Hotel
                      description: Boutique hotel in Kigali city center.
                      category: hotel
                      contact_phone: '+250788123456'
                      contact_email: info@sunrisehotel.rw
                      business_license: LIC-2025-001
                      is_verified: false
                      status: pending
                      onboarding_status: in_review
                      agent_id: 12
                      created_at: 2025-11-07T09:30:00Z
                      updated_at: 2025-11-07T09:30:00Z
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/merchants/onboarding-status:
    get:
      tags:
        - Merchant Onboarding
      summary: Retrieve current merchant onboarding status
      operationId: getMerchantOnboardingStatus
      security:
        - BearerAuth: []
      responses:
        '200':
          description: Merchant onboarding status retrieved
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/MerchantOnboardingStatus'
              examples:
                onboardingStatus:
                  value:
                    status: success
                    message: Onboarding status retrieved
                    data:
                      merchant_id: 101
                      onboarding_status: in_review
                      status: pending
                      required_documents:
                        - business_license
                        - tax_clearance
                      submitted_documents:
                        - business_license
                      missing_documents:
                        - tax_clearance
                      last_reviewed_at: 2025-11-07T10:15:00Z
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/merchants/onboarding/{merchant_id}:
    put:
      tags:
        - Merchant Onboarding
      summary: Update merchant onboarding status
      operationId: updateMerchantOnboardingStatus
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/MerchantIdParam'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MerchantOnboardingUpdateRequest'
      responses:
        '200':
          description: Merchant onboarding status updated
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/MerchantOnboardingStatus'
              examples:
                updatedOnboarding:
                  value:
                    status: success
                    message: Merchant onboarding status updated
                    data:
                      merchant_id: 101
                      onboarding_status: approved
                      status: active
                      required_documents:
                        - business_license
                        - tax_clearance
                      submitted_documents:
                        - business_license
                        - tax_clearance
                      missing_documents: []
                      last_reviewed_at: 2025-11-07T12:05:00Z
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/merchants/{merchant_id}/documents:
    post:
      tags:
        - Merchant Onboarding
      summary: Upload a merchant onboarding document
      operationId: uploadMerchantDocument
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/MerchantIdParam'
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/MerchantDocumentUploadRequest'
      responses:
        '201':
          description: Merchant document uploaded successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/MerchantDocument'
              examples:
                documentUploaded:
                  value:
                    status: success
                    message: Document uploaded successfully
                    data:
                      document_id: 501
                      merchant_id: 101
                      document_type: tax_clearance
                      file_name: tax-clearance-2025.pdf
                      uploaded_at: 2025-11-07T09:45:00Z
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/merchants/me:
    get:
      tags:
        - Merchant Profile
      summary: Get the authenticated merchant profile
      operationId: getOwnMerchantProfile
      security:
        - BearerAuth: []
      responses:
        '200':
          description: Merchant profile retrieved
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Merchant'
              examples:
                merchantProfile:
                  value:
                    status: success
                    message: Merchant profile retrieved
                    data:
                      merchant_id: 101
                      user_id: 55
                      business_name: Sunrise Hotel
                      description: Boutique hotel in Kigali city center.
                      category: hotel
                      contact_phone: '+250788123456'
                      contact_email: info@sunrisehotel.rw
                      business_license: LIC-2025-001
                      is_verified: true
                      status: active
                      onboarding_status: approved
                      agent_id: 12
                      created_at: 2025-01-15T08:00:00Z
                      updated_at: 2025-11-07T10:00:00Z
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'
    put:
      tags:
        - Merchant Profile
      summary: Update the authenticated merchant profile
      operationId: updateOwnMerchantProfile
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MerchantUpdateRequest'
      responses:
        '200':
          description: Merchant profile updated
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Merchant'
              examples:
                merchantUpdated:
                  value:
                    status: success
                    message: Merchant profile updated
                    data:
                      merchant_id: 101
                      user_id: 55
                      business_name: Sunrise Hotel & Spa
                      description: Luxury boutique hotel with spa services.
                      category: hotel
                      contact_phone: '+250788123456'
                      contact_email: hello@sunrisehotel.rw
                      business_license: LIC-2025-001
                      is_verified: true
                      status: active
                      onboarding_status: approved
                      agent_id: 12
                      created_at: 2025-01-15T08:00:00Z
                      updated_at: 2025-11-07T12:30:00Z
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/merchants/{merchant_id}:
    get:
      tags:
        - Merchant Profile
      summary: Get merchant profile by identifier
      operationId: getMerchantById
      parameters:
        - $ref: '#/components/parameters/MerchantIdParam'
      responses:
        '200':
          description: Merchant profile retrieved
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Merchant'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/merchants/search:
    get:
      tags:
        - Merchant Profile
      summary: Search merchants with filters
      operationId: searchMerchants
      parameters:
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/LimitParam'
        - $ref: '#/components/parameters/SortParam'
        - $ref: '#/components/parameters/SearchParam'
        - in: query
          name: category
          schema:
            $ref: '#/components/schemas/MerchantCategory'
          description: Filter by merchant category
        - in: query
          name: city
          schema:
            type: string
          description: Filter by city
        - in: query
          name: status
          schema:
            $ref: '#/components/schemas/MerchantStatus'
          description: Filter by merchant account status
      responses:
        '200':
          description: Merchant search results retrieved
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/PaginatedSuccessResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/Merchant'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/merchants/me/locations:
    get:
      tags:
        - Merchant Locations
      summary: List merchant locations
      operationId: listMerchantLocations
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/LimitParam'
        - $ref: '#/components/parameters/SortParam'
        - in: query
          name: city
          schema:
            type: string
          description: Filter by city name
        - in: query
          name: district
          schema:
            type: string
          description: Filter by district
        - in: query
          name: neighborhood
          schema:
            type: string
          description: Filter by neighborhood
      responses:
        '200':
          description: Merchant locations retrieved
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/PaginatedSuccessResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/MerchantLocation'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'
    post:
      tags:
        - Merchant Locations
      summary: Create a merchant location
      operationId: createMerchantLocation
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MerchantLocationRequest'
      responses:
        '201':
          description: Merchant location created
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/MerchantLocation'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/merchants/me/locations/{location_id}:
    put:
      tags:
        - Merchant Locations
      summary: Update a merchant location
      operationId: updateMerchantLocation
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/LocationIdParam'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MerchantLocationRequest'
      responses:
        '200':
          description: Merchant location updated
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/MerchantLocation'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
    delete:
      tags:
        - Merchant Locations
      summary: Archive a merchant location
      operationId: deleteMerchantLocation
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/LocationIdParam'
      responses:
        '200':
          description: Merchant location archived
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/MerchantLocation'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/merchants/me/subscriptions:
    get:
      tags:
        - Merchant Subscriptions
      summary: List merchant subscriptions
      operationId: listMerchantSubscriptions
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/LimitParam'
        - $ref: '#/components/parameters/SortParam'
        - in: query
          name: status
          schema:
            $ref: '#/components/schemas/MerchantSubscriptionStatus'
          description: Filter by subscription status
      responses:
        '200':
          description: Merchant subscriptions retrieved
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/PaginatedSuccessResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/MerchantSubscription'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'
    post:
      tags:
        - Merchant Subscriptions
      summary: Create a merchant subscription
      operationId: createMerchantSubscription
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MerchantSubscriptionRequest'
      responses:
        '201':
          description: Merchant subscription created
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/MerchantSubscription'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/merchants/me/subscriptions/{subscription_id}:
    put:
      tags:
        - Merchant Subscriptions
      summary: Update a merchant subscription
      operationId: updateMerchantSubscription
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/SubscriptionIdParam'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MerchantSubscriptionRequest'
      responses:
        '200':
          description: Merchant subscription updated
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/MerchantSubscription'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
    delete:
      tags:
        - Merchant Subscriptions
      summary: Cancel a merchant subscription
      operationId: deleteMerchantSubscription
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/SubscriptionIdParam'
      responses:
        '200':
          description: Merchant subscription cancelled
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/MerchantSubscription'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/merchants/me/promotions:
    get:
      tags:
        - Merchant Promotions
      summary: List merchant promotions
      operationId: listMerchantPromotions
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/LimitParam'
        - $ref: '#/components/parameters/SortParam'
        - in: query
          name: status
          schema:
            $ref: '#/components/schemas/MerchantPromotionStatus'
          description: Filter by promotion status
        - in: query
          name: promotion_type
          schema:
            $ref: '#/components/schemas/MerchantPromotionType'
          description: Filter by promotion type
      responses:
        '200':
          description: Merchant promotions retrieved
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/PaginatedSuccessResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/MerchantPromotion'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'
    post:
      tags:
        - Merchant Promotions
      summary: Create a merchant promotion
      operationId: createMerchantPromotion
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MerchantPromotionRequest'
      responses:
        '201':
          description: Merchant promotion created
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/MerchantPromotion'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /api/v1/merchants/me/promotions/{promotion_id}:
    put:
      tags:
        - Merchant Promotions
      summary: Update a merchant promotion
      operationId: updateMerchantPromotion
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/PromotionIdParam'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MerchantPromotionRequest'
      responses:
        '200':
          description: Merchant promotion updated
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/MerchantPromotion'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
    delete:
      tags:
        - Merchant Promotions
      summary: Archive a merchant promotion
      operationId: deleteMerchantPromotion
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/PromotionIdParam'
      responses:
        '200':
          description: Merchant promotion archived
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/MerchantPromotion'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
components:
  securitySchemes:
    BearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
  parameters:
    PageParam:
      in: query
      name: page
      schema:
        type: integer
        minimum: 1
        default: 1
      description: Page number for pagination
    LimitParam:
      in: query
      name: limit
      schema:
        type: integer
        minimum: 1
        maximum: 100
        default: 20
      description: Number of items per page
    SortParam:
      in: query
      name: sort
      schema:
        type: string
      description: Sort expression (e.g., business_name:asc)
    SearchParam:
      in: query
      name: search
      schema:
        type: string
      description: Free text search query
    UserIdParam:
      in: path
      name: user_id
      required: true
      schema:
        type: integer
        format: int64
      description: Unique user identifier
    AgentIdParam:
      in: path
      name: agent_id
      required: true
      schema:
        type: integer
        format: int64
      description: Unique agent identifier
    MerchantIdParam:
      in: path
      name: merchant_id
      required: true
      schema:
        type: integer
        format: int64
      description: Unique merchant identifier
    SavedLocationIdParam:
      in: path
      name: saved_location_id
      required: true
      schema:
        type: integer
        format: int64
      description: Unique saved location identifier
    ListingIdParam:
      in: path
      name: listing_id
      required: true
      schema:
        type: integer
        format: int64
      description: Unique listing identifier
    SearchIdParam:
      in: path
      name: search_id
      required: true
      schema:
        type: integer
        format: int64
      description: Unique search history identifier
    CommissionIdParam:
      in: path
      name: commission_id
      required: true
      schema:
        type: integer
        format: int64
      description: Unique commission identifier
    LocationIdParam:
      in: path
      name: location_id
      required: true
      schema:
        type: integer
        format: int64
      description: Unique location identifier
    SubscriptionIdParam:
      in: path
      name: subscription_id
      required: true
      schema:
        type: integer
        format: int64
      description: Unique subscription identifier
    PromotionIdParam:
      in: path
      name: promotion_id
      required: true
      schema:
        type: integer
        format: int64
      description: Unique promotion identifier
    LeaderboardPeriodParam:
      in: path
      name: period
      required: true
      schema:
        $ref: '#/components/schemas/LeaderboardPeriod'
      description: Leaderboard aggregation period
  responses:
    BadRequestError:
      description: The request payload or parameters were invalid
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          examples:
            badRequest:
              value:
                status: error
                message: Validation failed
                error:
                  code: MERCHANT_VALIDATION_ERROR
                  details:
                    - field: business_name
                      issue: Business name is required
    UnauthorizedError:
      description: Authentication credentials are missing or invalid
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          examples:
            unauthorized:
              value:
                status: error
                message: Authentication failed
                error:
                  code: AUTH_INVALID_TOKEN
                  details: []
    NotFoundError:
      description: The requested resource was not found
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          examples:
            notFound:
              value:
                status: error
                message: Merchant not found
                error:
                  code: MERCHANT_NOT_FOUND
                  details: []
    InternalServerError:
      description: Unexpected server error occurred
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          examples:
            serverError:
              value:
                status: error
                message: Unexpected error occurred
                error:
                  code: INTERNAL_SERVER_ERROR
                  details: []
  schemas:
    SuccessResponse:
      type: object
      required:
        - status
        - message
        - data
      properties:
        status:
          type: string
          enum: [success]
        message:
          type: string
        data:
          description: Response payload container
    PaginatedSuccessResponse:
      type: object
      required:
        - status
        - message
        - data
        - pagination
      properties:
        status:
          type: string
          enum: [success]
        message:
          type: string
        data:
          type: array
          items:
            description: Placeholder for paginated data items
        pagination:
          type: object
          required:
            - page
            - limit
            - total
            - totalPages
          properties:
            page:
              type: integer
            limit:
              type: integer
            total:
              type: integer
            totalPages:
              type: integer
    ErrorResponse:
      type: object
      required:
        - status
        - message
        - error
      properties:
        status:
          type: string
          enum: [error]
        message:
          type: string
        error:
          type: object
          required:
            - code
            - details
          properties:
            code:
              type: string
            details:
              type: array
              items:
                type: object
                properties:
                  field:
                    type: string
                  issue:
                    type: string
                  pointer:
                    type: string
                    description: JSON pointer to the field in error
    AuthTokens:
      type: object
      required:
        - access_token
        - refresh_token
        - expires_in
      properties:
        access_token:
          type: string
        refresh_token:
          type: string
        expires_in:
          type: integer
          description: Lifetime of the access token in seconds
    AuthResponse:
      type: object
      required:
        - user
        - tokens
      properties:
        user:
          $ref: '#/components/schemas/User'
        tokens:
          $ref: '#/components/schemas/AuthTokens'
    Acknowledgement:
      type: object
      required:
        - acknowledged
      properties:
        acknowledged:
          type: boolean
        reference_id:
          type: string
          nullable: true
    PasswordResetDispatch:
      type: object
      required:
        - email
        - reset_token_sent
      properties:
        email:
          type: string
          format: email
        reset_token_sent:
          type: boolean
        expires_in:
          type: integer
          nullable: true
          description: Number of seconds until reset token expires
    PasswordResetResult:
      type: object
      required:
        - password_reset
      properties:
        password_reset:
          type: boolean
    EmailVerificationResult:
      type: object
      required:
        - verified
      properties:
        verified:
          type: boolean
    AccountDeletionResult:
      type: object
      required:
        - deactivated
      properties:
        deactivated:
          type: boolean
        scheduled_at:
          type: string
          format: date-time
          nullable: true
          description: When the account will be fully purged, if applicable
    SearchHistoryClearResult:
      type: object
      required:
        - cleared
      properties:
        cleared:
          type: boolean
        removed_count:
          type: integer
          nullable: true
    SearchHistoryDeleteResult:
      type: object
      required:
        - deleted
      properties:
        deleted:
          type: boolean
        search_id:
          type: integer
          format: int64
    User:
      type: object
      required:
        - user_id
        - first_name
        - last_name
        - email
        - is_verified
        - created_at
        - updated_at
      properties:
        user_id:
          type: integer
          format: int64
        first_name:
          type: string
        last_name:
          type: string
        email:
          type: string
          format: email
        phone_number:
          type: string
          nullable: true
        avatar_url:
          type: string
          format: uri
          nullable: true
        default_city:
          type: string
          nullable: true
        is_verified:
          type: boolean
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
    UserRegistrationRequest:
      type: object
      required:
        - first_name
        - last_name
        - email
        - password
      properties:
        first_name:
          type: string
          maxLength: 120
        last_name:
          type: string
          maxLength: 120
        email:
          type: string
          format: email
        phone_number:
          type: string
        password:
          type: string
          format: password
          minLength: 8
        default_city:
          type: string
        referral_code:
          type: string
          nullable: true
    UserLoginRequest:
      type: object
      required:
        - email
        - password
      properties:
        email:
          type: string
          format: email
        password:
          type: string
          format: password
    RefreshTokenRequest:
      type: object
      required:
        - refresh_token
      properties:
        refresh_token:
          type: string
    ForgotPasswordRequest:
      type: object
      required:
        - email
      properties:
        email:
          type: string
          format: email
    ResetPasswordRequest:
      type: object
      required:
        - token
        - new_password
      properties:
        token:
          type: string
        new_password:
          type: string
          format: password
          minLength: 8
    VerifyEmailRequest:
      type: object
      required:
        - token
      properties:
        token:
          type: string
    UserProfileUpdateRequest:
      type: object
      required:
        - first_name
        - last_name
        - email
      properties:
        first_name:
          type: string
        last_name:
          type: string
        email:
          type: string
          format: email
        phone_number:
          type: string
        default_city:
          type: string
        avatar_url:
          type: string
          format: uri
    UserProfilePatchRequest:
      type: object
      properties:
        first_name:
          type: string
        last_name:
          type: string
        email:
          type: string
          format: email
        phone_number:
          type: string
        default_city:
          type: string
        avatar_url:
          type: string
          format: uri
    UserAvatarUploadRequest:
      type: object
      required:
        - avatar
      properties:
        avatar:
          type: string
          format: binary
    SavedLocationRequest:
      type: object
      required:
        - city
        - district
        - label
      properties:
        city:
          type: string
        district:
          type: string
        neighborhood:
          type: string
        label:
          type: string
        latitude:
          type: number
          format: float
        longitude:
          type: number
          format: float
    SavedLocation:
      type: object
      required:
        - saved_location_id
        - user_id
        - city
        - district
        - label
        - created_at
      properties:
        saved_location_id:
          type: integer
          format: int64
        user_id:
          type: integer
          format: int64
        city:
          type: string
        district:
          type: string
        neighborhood:
          type: string
          nullable: true
        label:
          type: string
        latitude:
          type: number
          format: float
          nullable: true
        longitude:
          type: number
          format: float
          nullable: true
        created_at:
          type: string
          format: date-time
    UserFavoriteRequest:
      type: object
      required:
        - listing_id
      properties:
        listing_id:
          type: integer
          format: int64
    UserFavorite:
      type: object
      required:
        - favorite_id
        - user_id
        - listing_id
        - created_at
      properties:
        favorite_id:
          type: integer
          format: int64
        user_id:
          type: integer
          format: int64
        listing_id:
          type: integer
          format: int64
        created_at:
          type: string
          format: date-time
    UserSearchHistoryEntry:
      type: object
      required:
        - search_id
        - user_id
        - search_query
        - searched_at
      properties:
        search_id:
          type: integer
          format: int64
        user_id:
          type: integer
          format: int64
        search_query:
          type: string
        filters:
          type: object
          additionalProperties: true
          nullable: true
        location:
          type: string
          nullable: true
        searched_at:
          type: string
          format: date-time
    AgentTier:
      type: string
      enum:
        - bronze
        - silver
        - gold
    AgentBadge:
      type: string
      enum:
        - top_performer
        - certified
        - elite
    Agent:
      type: object
      required:
        - agent_id
        - user_id
        - agent_code
        - tier
        - commission_balance
        - total_earnings
        - momo_number
        - successful_referrals
        - is_certified
        - joined_at
        - updated_at
      properties:
        agent_id:
          type: integer
          format: int64
        user_id:
          type: integer
          format: int64
        agent_code:
          type: string
        tier:
          $ref: '#/components/schemas/AgentTier'
        badge:
          $ref: '#/components/schemas/AgentBadge'
          nullable: true
        commission_balance:
          type: number
          format: float
        total_earnings:
          type: number
          format: float
        momo_number:
          type: string
        leaderboard_rank:
          type: integer
          nullable: true
        successful_referrals:
          type: integer
        is_certified:
          type: boolean
        joined_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
    AgentApplicationRequest:
      type: object
      required:
        - momo_number
        - experience_summary
      properties:
        momo_number:
          type: string
        experience_summary:
          type: string
        preferred_tier:
          $ref: '#/components/schemas/AgentTier'
          nullable: true
        regions_served:
          type: array
          items:
            type: string
        referral_code:
          type: string
          nullable: true
    AgentProfileUpdateRequest:
      type: object
      properties:
        momo_number:
          type: string
        badge:
          $ref: '#/components/schemas/AgentBadge'
        tier:
          $ref: '#/components/schemas/AgentTier'
        status_note:
          type: string
        leaderboard_rank:
          type: integer
        is_certified:
          type: boolean
    AgentOnboardUserRequest:
      type: object
      required:
        - first_name
        - last_name
        - phone_number
      properties:
        first_name:
          type: string
        last_name:
          type: string
        email:
          type: string
          format: email
          nullable: true
        phone_number:
          type: string
        city:
          type: string
          nullable: true
        referral_code:
          type: string
          nullable: true
    AgentOnboardMerchantRequest:
      type: object
      required:
        - business_name
        - contact_phone
        - category
      properties:
        business_name:
          type: string
        contact_person:
          type: string
          nullable: true
        contact_email:
          type: string
          format: email
          nullable: true
        contact_phone:
          type: string
        category:
          $ref: '#/components/schemas/MerchantCategory'
        city:
          type: string
          nullable: true
        district:
          type: string
          nullable: true
        notes:
          type: string
          nullable: true
    AgentOnboardingResult:
      type: object
      required:
        - resource_type
        - resource_id
        - commission_awarded
      properties:
        resource_type:
          type: string
          enum:
            - user
            - merchant
        resource_id:
          type: integer
          format: int64
        commission_awarded:
          type: number
          format: float
        currency:
          type: string
        referral_code:
          type: string
          nullable: true
    AgentOnboardingStats:
      type: object
      required:
        - total_users_onboarded
        - total_merchants_onboarded
        - conversions_last_30_days
      properties:
        total_users_onboarded:
          type: integer
        total_merchants_onboarded:
          type: integer
        active_merchants:
          type: integer
        active_users:
          type: integer
        conversions_last_30_days:
          type: integer
        pending_applications:
          type: integer
        last_synced_at:
          type: string
          format: date-time
          nullable: true
    CommissionStatus:
      type: string
      enum:
        - pending
        - paid
    CommissionType:
      type: string
      enum:
        - subscription
        - booking
        - order
    Commission:
      type: object
      required:
        - commission_id
        - agent_id
        - commission_type
        - amount
        - currency
        - status
        - created_at
      properties:
        commission_id:
          type: integer
          format: int64
        agent_id:
          type: integer
          format: int64
        merchant_id:
          type: integer
          format: int64
          nullable: true
        user_id:
          type: integer
          format: int64
          nullable: true
        commission_type:
          $ref: '#/components/schemas/CommissionType'
        amount:
          type: number
          format: float
        currency:
          type: string
        status:
          $ref: '#/components/schemas/CommissionStatus'
        related_id:
          type: integer
          format: int64
          nullable: true
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
          nullable: true
    CommissionSummary:
      type: object
      required:
        - total_commissions
        - pending_amount
        - paid_amount
      properties:
        total_commissions:
          type: number
          format: float
        pending_amount:
          type: number
          format: float
        paid_amount:
          type: number
          format: float
        total_transactions:
          type: integer
        last_payout_at:
          type: string
          format: date-time
          nullable: true
    CommissionPayoutResult:
      type: object
      required:
        - payout_initiated
      properties:
        payout_initiated:
          type: boolean
        payout_reference:
          type: string
          nullable: true
        expected_settlement_at:
          type: string
          format: date-time
          nullable: true
    LeaderboardPeriod:
      type: string
      enum:
        - daily
        - weekly
        - monthly
    AgentLeaderboardEntry:
      type: object
      required:
        - rank
        - agent_id
        - agent_code
        - tier
        - points
        - period
      properties:
        rank:
          type: integer
        agent_id:
          type: integer
          format: int64
        agent_code:
          type: string
        agent_name:
          type: string
          nullable: true
        tier:
          $ref: '#/components/schemas/AgentTier'
        badge:
          $ref: '#/components/schemas/AgentBadge'
          nullable: true
        points:
          type: integer
        period:
          $ref: '#/components/schemas/LeaderboardPeriod'
        successful_referrals:
          type: integer
        commission_earned:
          type: number
          format: float
        city:
          type: string
          nullable: true
    AgentLeaderboardPosition:
      type: object
      required:
        - rank
        - period
        - points
        - total_agents
      properties:
        rank:
          type: integer
        period:
          $ref: '#/components/schemas/LeaderboardPeriod'
        points:
          type: integer
        total_agents:
          type: integer
        percentile:
          type: number
          format: float
          nullable: true
    AgentAnalytics:
      type: object
      required:
        - summary
      properties:
        summary:
          type: object
          required:
            - total_commissions
            - total_clients
            - active_merchants
            - active_users
          properties:
            total_commissions:
              type: number
              format: float
            total_clients:
              type: integer
            active_merchants:
              type: integer
            active_users:
              type: integer
            conversion_rate:
              type: number
              format: float
        weekly_trends:
          type: array
          items:
            type: object
            required:
              - week_start
              - commissions
              - onboardings
            properties:
              week_start:
                type: string
                format: date
              commissions:
                type: number
                format: float
              onboardings:
                type: integer
        top_merchants:
          type: array
          items:
            type: object
            required:
              - merchant_id
              - business_name
              - revenue_contribution
            properties:
              merchant_id:
                type: integer
                format: int64
              business_name:
                type: string
              revenue_contribution:
                type: number
                format: float
        generated_at:
          type: string
          format: date-time
    AgentPerformance:
      type: object
      required:
        - period
        - metrics
      properties:
        period:
          $ref: '#/components/schemas/LeaderboardPeriod'
        metrics:
          type: object
          required:
            - onboarded_users
            - onboarded_merchants
            - conversion_rate
            - commissions_earned
          properties:
            onboarded_users:
              type: integer
            onboarded_merchants:
              type: integer
            conversion_rate:
              type: number
              format: float
            commissions_earned:
              type: number
              format: float
            average_response_time_minutes:
              type: number
              format: float
              nullable: true
        comparison:
          type: object
          properties:
            previous_period:
              type: string
            delta_percentage:
              type: number
              format: float
    MerchantCategory:
      type: string
      enum:
        - hotel
        - restaurant
        - bar
        - coffee_shop
        - event_venue
        - tour_operator
        - shop
        - service
    MerchantStatus:
      type: string
      enum:
        - pending
        - active
        - suspended
    MerchantOnboardingStatusValue:
      type: string
      enum:
        - pending
        - in_review
        - approved
        - rejected
    Merchant:
      type: object
      required:
        - merchant_id
        - user_id
        - business_name
        - category
        - status
        - onboarding_status
        - created_at
        - updated_at
      properties:
        merchant_id:
          type: integer
          format: int64
        user_id:
          type: integer
          format: int64
        business_name:
          type: string
        description:
          type: string
        category:
          $ref: '#/components/schemas/MerchantCategory'
        contact_phone:
          type: string
        contact_email:
          type: string
          format: email
        business_license:
          type: string
        is_verified:
          type: boolean
        status:
          $ref: '#/components/schemas/MerchantStatus'
        onboarding_status:
          $ref: '#/components/schemas/MerchantOnboardingStatusValue'
        agent_id:
          type: integer
          format: int64
          nullable: true
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
    MerchantApplicationRequest:
      type: object
      required:
        - business_name
        - category
        - contact_phone
        - contact_email
        - description
      properties:
        business_name:
          type: string
          maxLength: 255
        description:
          type: string
        category:
          $ref: '#/components/schemas/MerchantCategory'
        contact_phone:
          type: string
        contact_email:
          type: string
          format: email
        business_license:
          type: string
        agent_code:
          type: string
          description: Optional referral agent code
        location:
          $ref: '#/components/schemas/MerchantLocationRequest'
    MerchantOnboardingStatus:
      type: object
      required:
        - merchant_id
        - onboarding_status
        - status
        - required_documents
        - submitted_documents
        - missing_documents
      properties:
        merchant_id:
          type: integer
          format: int64
        onboarding_status:
          $ref: '#/components/schemas/MerchantOnboardingStatusValue'
        status:
          $ref: '#/components/schemas/MerchantStatus'
        required_documents:
          type: array
          items:
            type: string
        submitted_documents:
          type: array
          items:
            type: string
        missing_documents:
          type: array
          items:
            type: string
        last_reviewed_at:
          type: string
          format: date-time
          nullable: true
    MerchantOnboardingUpdateRequest:
      type: object
      required:
        - onboarding_status
        - status
      properties:
        onboarding_status:
          $ref: '#/components/schemas/MerchantOnboardingStatusValue'
        status:
          $ref: '#/components/schemas/MerchantStatus'
        review_notes:
          type: string
        missing_documents:
          type: array
          items:
            type: string
    MerchantDocumentUploadRequest:
      type: object
      required:
        - document_type
        - file
      properties:
        document_type:
          type: string
          description: Document type identifier (e.g., business_license)
        file:
          type: string
          format: binary
    MerchantDocument:
      type: object
      required:
        - document_id
        - merchant_id
        - document_type
        - file_name
        - uploaded_at
      properties:
        document_id:
          type: integer
          format: int64
        merchant_id:
          type: integer
          format: int64
        document_type:
          type: string
        file_name:
          type: string
        uploaded_at:
          type: string
          format: date-time
    MerchantUpdateRequest:
      type: object
      properties:
        business_name:
          type: string
        description:
          type: string
        contact_phone:
          type: string
        contact_email:
          type: string
          format: email
        business_license:
          type: string
        default_city:
          type: string
        social_links:
          type: array
          items:
            type: string
    MerchantLocationRequest:
      type: object
      required:
        - address_line_1
        - city
        - district
      properties:
        address_line_1:
          type: string
        address_line_2:
          type: string
        city:
          type: string
        district:
          type: string
        neighborhood:
          type: string
        latitude:
          type: number
          format: float
        longitude:
          type: number
          format: float
        timezone:
          type: string
    MerchantLocation:
      type: object
      required:
        - location_id
        - merchant_id
        - address_line_1
        - city
        - district
      properties:
        location_id:
          type: integer
          format: int64
        merchant_id:
          type: integer
          format: int64
        address_line_1:
          type: string
        address_line_2:
          type: string
        city:
          type: string
        district:
          type: string
        neighborhood:
          type: string
        latitude:
          type: number
          format: float
        longitude:
          type: number
          format: float
        timezone:
          type: string
    MerchantSubscriptionPlan:
      type: string
      enum:
        - basic
        - premium
        - enterprise
    MerchantSubscriptionStatus:
      type: string
      enum:
        - active
        - expired
        - cancelled
    MerchantSubscriptionRequest:
      type: object
      required:
        - plan
        - start_date
      properties:
        plan:
          $ref: '#/components/schemas/MerchantSubscriptionPlan'
        start_date:
          type: string
          format: date
        end_date:
          type: string
          format: date
        payment_id:
          type: integer
          format: int64
        status:
          $ref: '#/components/schemas/MerchantSubscriptionStatus'
    MerchantSubscription:
      type: object
      required:
        - subscription_id
        - merchant_id
        - plan
        - start_date
        - status
      properties:
        subscription_id:
          type: integer
          format: int64
        merchant_id:
          type: integer
          format: int64
        plan:
          $ref: '#/components/schemas/MerchantSubscriptionPlan'
        start_date:
          type: string
          format: date
        end_date:
          type: string
          format: date
          nullable: true
        status:
          $ref: '#/components/schemas/MerchantSubscriptionStatus'
        payment_id:
          type: integer
          format: int64
          nullable: true
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
    MerchantPromotionType:
      type: string
      enum:
        - flash_sale
        - discount
        - campaign
    MerchantPromotionStatus:
      type: string
      enum:
        - active
        - scheduled
        - expired
    MerchantPromotionRequest:
      type: object
      required:
        - title
        - promotion_type
        - start_date
        - end_date
      properties:
        title:
          type: string
        description:
          type: string
        promotion_type:
          $ref: '#/components/schemas/MerchantPromotionType'
        start_date:
          type: string
          format: date
        end_date:
          type: string
          format: date
        discount_percent:
          type: number
          format: float
        discount_amount:
          type: number
          format: float
        status:
          $ref: '#/components/schemas/MerchantPromotionStatus'
    MerchantPromotion:
      type: object
      required:
        - promotion_id
        - merchant_id
        - title
        - promotion_type
        - start_date
        - end_date
        - status
      properties:
        promotion_id:
          type: integer
          format: int64
        merchant_id:
          type: integer
          format: int64
        title:
          type: string
        description:
          type: string
        promotion_type:
          $ref: '#/components/schemas/MerchantPromotionType'
        start_date:
          type: string
          format: date
        end_date:
          type: string
          format: date
        discount_percent:
          type: number
          format: float
        discount_amount:
          type: number
          format: float
        status:
          $ref: '#/components/schemas/MerchantPromotionStatus'
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time

